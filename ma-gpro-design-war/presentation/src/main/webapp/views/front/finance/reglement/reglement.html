<script type="text/javascript">

  var SearchBoxElements = document.querySelectorAll(".ms-SearchBox");
  for (var i = 0; i < SearchBoxElements.length; i++) {
    new fabric['SearchBox'](SearchBoxElements[i]);
  }



  
  var PanelExamples = document.getElementsByClassName("ms-PanelExample");
  for (var i = 0; i < PanelExamples.length; i++) {
    (function() {
      var PanelExampleButton = PanelExamples[i].querySelector(".ms-Button");
      var PanelExamplePanel = PanelExamples[i].querySelector(".ms-Panel");
      PanelExampleButton.addEventListener("click", function(i) {
        new fabric['Panel'](PanelExamplePanel);
      });
    }());
  }

</script>

<style>
  .center {
    margin: auto;
    width: 35%;
    padding: 30px;
  }
</style>

<div ng-controller="ReglementController" style="background-color: #fff;">

  <div class="row panel-body" ng-show="displayMode != 'edit'">

    <div class="col-sm-12">
    
     
      <span class="ms-ListItem-primaryText" style="font-size:130%">Crit&eacute;re de Recherche</span>
      

      <div class="ms-CommandBar ms-CommandBar--navBar">
<!--         <div class="ms-CommandBar-sideCommands">
          <div class="ms-SearchBox ms-SearchBox--commandBar">
            <input class="ms-SearchBox-field" type="text" value="" ng-model="filterOptions.filterText" />
            <label class="ms-SearchBox-label">
              <i class="ms-SearchBox-icon ms-Icon ms-Icon--Search"></i>
              <span class="ms-SearchBox-text">Rechercher</span>
            </label>
            <div class="ms-CommandButton ms-SearchBox-clear ms-CommandButton--noLabel">
              <button class="ms-CommandButton-button">
                <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Cancel"></i></span>
                <span class="ms-CommandButton-label"></span>
              </button>
            </div>
            <div class="ms-CommandButton ms-SearchBox-exit ms-CommandButton--noLabel">
              <button class="ms-CommandButton-button">
                <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--ChromeBack"></i></span>
                <span class="ms-CommandButton-label"></span>
              </button>
            </div>
            <div class="ms-CommandButton ms-SearchBox-filter ms-CommandButton--noLabel">
              <button class="ms-CommandButton-button">
                <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Filter"></i></span>
                <span class="ms-CommandButton-label"></span>
              </button>
            </div>
          </div>

          <div class="ms-CommandButton ms-CommandButton--noLabel">
            <button class="ms-CommandButton-button">
              <span class="ms-CommandButton-icon ms-fontColor-themePrimary"><i class="ms-Icon ms-Icon--Info"></i></span>
              <span class="ms-CommandButton-label"></span>
            </button>
          </div>
        </div> -->
        <div class="ms-CommandBar-mainArea">
          <div class="ms-CommandButton">
            <button class="ms-CommandButton-button" ng-click="AffectationReglement(reglementCourante)">
              <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--CirclePlus"></i></span>
              <span class="ms-CommandButton-label">Ajouter</span>
            </button>
          </div>

          <div class="ms-CommandButton">
            <button class="ms-CommandButton-button" ng-click="downloadAllReglements(reglementCourante)">
              <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Generate"></i></span>
              <span class="ms-CommandButton-label">G&eacute;n&eacute;rer</span>
            </button>
          </div>
          <div class="ms-CommandButton">
            <button class="ms-CommandButton-button" ng-click="rechercheReglement(reglementCourante)">
              <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--FolderSearch"></i></span>
              <span class="ms-CommandButton-label">Rechercher</span>
            </button>
          </div>

          <div class="ms-CommandButton">
            <button class="ms-CommandButton-button" ng-click="annulerAjout()">
              <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Cancel"></i></span>
              <span class="ms-CommandButton-label">Annuler</span>
            </button>
          </div>
        <div ng-hide="true" class="ms-CommandButton ms-CommandBar-overflowButton ms-CommandButton--noLabel">
       <button class="ms-CommandButton-button">
              <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--More"></i></span>
              <span class="ms-CommandButton-label"></span>
            </button>
            <ul class="ms-ContextualMenu is-opened">
              <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1">Folder</a>
                <i class="ms-Icon ms-Icon--Folder"></i>
              </li>
              <li class="ms-ContextualMenu-item ms-ContextualMenu-item--divider"></li>
              <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1">Plain Text Document</a>
                <i class="ms-Icon ms-Icon--Document"></i>
              </li>
              <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1">A Coffee</a>
                <i class="ms-Icon ms-Icon--Coffee"></i>
              </li>
              <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1">Picture</a>
                <i class="ms-Icon ms-Icon--Picture"></i>
              </li>
              <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1">Money</a>
                <i class="ms-Icon ms-Icon--Money"></i>
              </li>
            </ul>
          </div> 
        </div>
      </div>

      <div class="panel panel-primary" style="margin-bottom:0%">
        <div class="panel-body">
          <form class="form-horizontal" name="rechercheReglementForm" id="rechercheReglementForm">
            <div class="row">
      
      
      
      <div class="col-sm-3">
              <div class="form-group">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <label class="input-group-text ms-Label">
                      R&eacute;f.</label>
                  </div>
                  <input class="form-control" ng-model="reglementCourante.reference"
                    ng-init="reglementCourante.reference=''" />
                </div>
              </div>


            </div>
      
      
      
              <div class="col-sm-3">
                <div class="form-group">
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <label class="input-group-text ms-Label">Client</label>
                    </div>
                    <select ui-select2 ng-model="reglementCourante.partieIntId"
                      ng-init="reglementCourante.partieIntId= ''" data-placeholder class="form-control"
                      style="border: 1px solid #e5eaee !important;">
                      <option value="">Tous les Clients</option>
                      <option ng-repeat="pi in listePartieInteresseeCache | filter:{famillePartieInteressee:1}"
                        value="{{pi.id}}">{{pi.reference}}-{{pi.abreviation}}</option>
                    </select>
                  </div>
                </div>


              </div>



              <div class="col-sm-3">
                <div class="form-group">
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <label class="input-group-text ms-Label">Magasin</label>
                    </div>
                    <select ui-select2 ng-model="reglementCourante.idDepot" ng-init="reglementCourante.idDepot =''"
                      data-placeholder="" class="form-control" style="border: 1px solid #e5eaee !important;">
                      <option value="">Tous les Magasins</option>
                      <option ng-repeat="magazin in listeMagazinCache" value="{{magazin.id}}">{{magazin.designation}}
                      </option>
                    </select>
                  </div>
                </div>


              </div>
              
              
               <div class="col-sm-3" ng-show="clientActif.blackMode==true">

              <div class="form-group">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <label class="input-group-text ms-Label">Declaree</label>
                  </div>
                  <select ui-select2 ng-model="reglementCourante.declarerRech" data-placeholder=""
                    class="form-control" style="border: 1px solid #e5eaee !important;">
                    <option value="">Tous</option>
                    <option value="oui">OUI</option>
                    <option value="non">NON</option>
                  </select>
                </div>
              </div>
            </div>
            </div>

            <div class="row">
              <div class="col-sm-3" ng-controller="DatepickerDemoController">
                <div class="form-group">
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text">Date Reglement. Entre</span>
                    </div>
                    <input type="text" class="form-control datepicker" datepicker-popup="{{format}}"
                      ng-model="reglementCourante.dateReglementMin" is-open="opened" datepicker-options="dateOptions"
                      date-="enabled(date, mode)" close-text="Close" />

                    <div class="input-group-append">
                      <button type="button" class="btn1 btn-default" ng-click="open($event)" style="
                          color: rgb(54, 153, 255);
                          background-color: rgb(225, 240, 255);
                        ">
                        <i class="glyphicon glyphicon-calendar" style="color: #3699ff;"></i>
                      </button>
                    </div>
                  </div>
                </div>

              </div>



              <div class="col-sm-3" ng-controller="DatepickerDemoController">


                <div class="form-group">
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text">Et</span>
                    </div>
                    <input type="text" class="form-control datepicker" datepicker-popup="{{format}}"
                      ng-model="reglementCourante.dateReglementMax" is-open="opened" datepicker-options="dateOptions"
                      date-="enabled(date, mode)" close-text="Close" />

                    <div class="input-group-append">
                      <button type="button" class="btn1 btn-default" ng-click="open($event)" style="
                          color: rgb(54, 153, 255);
                          background-color: rgb(225, 240, 255);
                        ">
                        <i class="glyphicon glyphicon-calendar" style="color: #3699ff;"></i>
                      </button>
                    </div>
                  </div>
                </div>


              </div>
              
                <div class="col-sm-3">
                <div class="form-group">
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <label class="input-group-text ms-Label">Montant Entre</label>
                    </div>
                    <input type="number" class="form-control" ng-model="reglementCourante.montantMin"
                      ng-init="reglementCourante.montantMin =''" />
                  </div>
                </div>


              </div>
              <div class="col-sm-3">
                <div class="form-group">
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <label class="input-group-text ms-Label">Et</label>
                    </div>
                    <input type="number" class="form-control" ng-model="reglementCourante.montantMax"
                      ng-init="reglementCourante.montantMax =''" />
                  </div>
                </div>


              </div>
              
              
              
            </div>

            <div class="row">
            
            
                   
              <div class="col-sm-6">

              <div class="form-group">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <label class="input-group-text ms-Label">BL Ou Facture</label>
                  </div>
                  <select ui-select2 ng-model="reglementCourante.hasElementReglement" data-placeholder=""
                    class="form-control" style="border: 1px solid #e5eaee !important;">
                    <option value="">Tous</option>
                    <option value="oui">OUI</option>
                    <option value="non">NON</option>
                  </select>
                </div>
              </div>
            </div>
            
            
             <div class="col-sm-6">

              <div class="form-group">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <label class="input-group-text ms-Label">Detail</label>
                  </div>
                  <select ui-select2 ng-model="reglementCourante.hasDetailReglement" data-placeholder=""
                    class="form-control" style="border: 1px solid #e5eaee !important;">
                    <option value="">Tous</option>
                    <option value="oui">OUI</option>
                    <option value="non">NON</option>
                  </select>
                </div>
              </div>
            </div>
            
            
            
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="row panel-body" ng-show="displayMode == 'edit'">

    <div class="col-md-12">

  
      <span class="ms-ListItem-primaryText" style="font-size:130%">R&eacute;glement</span>
      
      <div class="ms-CommandBar ms-CommandBar--navBar">
<!--         <div class="ms-CommandBar-sideCommands">
          <div class="ms-SearchBox ms-SearchBox--commandBar">
            <input class="ms-SearchBox-field" type="text" value="" ng-model="filterOptions.filterText" />
            <label class="ms-SearchBox-label">
              <i class="ms-SearchBox-icon ms-Icon ms-Icon--Search"></i>
              <span class="ms-SearchBox-text">Rechercher</span>
            </label>
            <div class="ms-CommandButton ms-SearchBox-clear ms-CommandButton--noLabel">
              <button class="ms-CommandButton-button">
                <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Cancel"></i></span>
                <span class="ms-CommandButton-label"></span>
              </button>
            </div>
            <div class="ms-CommandButton ms-SearchBox-exit ms-CommandButton--noLabel">
              <button class="ms-CommandButton-button">
                <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--ChromeBack"></i></span>
                <span class="ms-CommandButton-label"></span>
              </button>
            </div>
            <div class="ms-CommandButton ms-SearchBox-filter ms-CommandButton--noLabel">
              <button class="ms-CommandButton-button">
                <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Filter"></i></span>
                <span class="ms-CommandButton-label"></span>
              </button>
            </div>
          </div>

          <div class="ms-CommandButton ms-CommandButton--noLabel">
            <button class="ms-CommandButton-button">
              <span class="ms-CommandButton-icon ms-fontColor-themePrimary"><i class="ms-Icon ms-Icon--Info"></i></span>
              <span class="ms-CommandButton-label"></span>
            </button>
          </div>
        </div> -->
        <div class="ms-CommandBar-mainArea">
          <div class="ms-CommandButton" permission="['FC_Reglement_Edit']">
            <button class="ms-CommandButton-button" ng-click="sauvegarderAjout(reglementCourante)" ng-disabled="!creationReglementForm.$valid">
              <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Save"></i></span>
              <span class="ms-CommandButton-label">Enregistrer</span>
            </button>
          </div>

          <div class="ms-CommandButton">
            <button class="ms-CommandButton-button" ng-click="downloadReglement(reglementCourante)">
              <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Generate"></i></span>
              <span class="ms-CommandButton-label">G&eacute;n&eacute;rer</span>
            </button>
          </div>

          <div class="ms-CommandButton">
            <button class="ms-CommandButton-button" ng-click="annulerAjout()">
              <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Back"></i></span>
              <span class="ms-CommandButton-label">Retour</span>
            </button>
          </div>
          
            <div class="ms-CommandButton">
            <button class="ms-CommandButton-button" ng-click="annulerAjoutRapide()">
              <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Back"></i></span>
              <span class="ms-CommandButton-label">Retour Rapide</span>
            </button>
          </div>
          
          
           <div ng-hide="true" class="ms-CommandButton ms-CommandBar-overflowButton ms-CommandButton--noLabel">
            <button class="ms-CommandButton-button">
              <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--More"></i></span>
              <span class="ms-CommandButton-label"></span>
            </button> 
            <ul class="ms-ContextualMenu is-opened">
              <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1">Folder</a>
                <i class="ms-Icon ms-Icon--Folder"></i>
              </li>
              <li class="ms-ContextualMenu-item ms-ContextualMenu-item--divider"></li>
              <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1">Plain Text Document</a>
                <i class="ms-Icon ms-Icon--Document"></i>
              </li>
              <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1">A Coffee</a>
                <i class="ms-Icon ms-Icon--Coffee"></i>
              </li>
              <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1">Picture</a>
                <i class="ms-Icon ms-Icon--Picture"></i>
              </li>
              <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1">Money</a>
                <i class="ms-Icon ms-Icon--Money"></i>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="panel panel-primary">
        <div class="panel-body">
          <form id="creationReglementForm" name="creationReglementForm">
            <div class="row">
              <div class="col-sm-4">
                <div class="form-group">
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <label class="input-group-text ms-Label">R&eacute;f.R&eacute;gl.</label>
                    </div>
                    <input class="form-control" ng-model="reglementCourante.reference"
                      ng-init="reglementCourante.reference=''" />
                  </div>
                </div>


              </div>

              <div class="col-sm-4">


                <div class="form-group">
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text">Client</span>
                    </div>
                    <select ui-select2 ng-model="reglementCourante.partieIntId"
                      ng-init="reglementCourante.partieIntId =''" data-placeholder="..." class="form-control"
                      style="border: 1px solid #e5eaee !important;" >
                      <option value="">Tous</option>
                      <option ng-repeat="pi in listePartieInteresseeCache | filter:{famillePartieInteressee:1}"
                        value="{{pi.id}}">{{pi.reference}}-{{pi.abreviation}}</option>
                    </select>
                    <div class="input-group-append" ng-show="modePdf != 'actif'">
                      <button class="btn" style="
                          color: rgb(54, 153, 255);
                          background-color: rgb(225, 240, 255);
                        " ng-click="Valider(reglementCourante.partieIntId)"
                        ng-disabled="!reglementCourante.partieIntId" type="button">
                        Valider
                      </button>
                    </div>
                  </div>
                </div>


              </div>



              <div class="col-sm-4" ng-controller="DatepickerDemoController">

                <div class="form-group">
                  <div class="input-group">

                    <div class="input-group-prepend">
                    <span class="input-group-text">Date</span>
                    </div>
                    <input type="text" class="form-control datepicker" datepicker-popup="{{format}}"
                      ng-init="reglementCourante.date =''" ng-model="reglementCourante.date"
                      ng-change="modePdf != 'actif' && getCurrentReferenceMensuelByDate(reglementCourante.date)" is-open="opened"
                      datepicker-options="dateOptions" date-="enabled(date, mode)" close-text="Close"  required/>



                    <div class="input-group-append">
                      <button type="button" class="btn1 btn-default" ng-click="open($event)" style="
                        color: rgb(54, 153, 255);
                        background-color: rgb(225, 240, 255);
                      ">
                        <i class="glyphicon glyphicon-calendar" style="color: #3699ff;"></i>
                      </button>
                    </div>
                  </div>
                </div>



              </div>



              <div class="col-sm-4">
                <div class="form-group">
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <label class="input-group-text ms-Label">Magasin</label>
                    </div>
                    <select ui-select2 ng-model="reglementCourante.idDepot" ng-init="reglementCourante.idDepot =''"
                      data-placeholder="" class="form-control" style="border: 1px solid #e5eaee !important;">
                      <option value="">Tous les Magasins</option>
                      <option ng-repeat="magazin in listeMagazinCache" value="{{magazin.id}}">{{magazin.designation}}
                      </option>
                    </select>
                  </div>
                </div>


              </div>

              <div class="col-sm-4">


                <div class="form-group">
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text">Groupe</span>
                    </div>
                    <select ui-select2 ng-model="reglementCourante.groupeClientId"
                      ng-init="reglementCourante.groupeClientId =''" data-placeholder="..." class="form-control"
                      style="border: 1px solid #e5eaee !important;" >
                      <option value="">Tous les Groupes</option>
                      <option ng-repeat="pi in listGroupeClient" value="{{pi.id}}">{{pi.designation}}</option>
                    </select>
                    <div class="input-group-append" ng-show="modePdf != 'actif'">
                      <button class="btn" style="
                          color: rgb(54, 153, 255);
                          background-color: rgb(225, 240, 255);
                        " ng-click="ValiderGroupeClient(reglementCourante.groupeClientId)"
                        ng-disabled="!reglementCourante.groupeClientId" type="button">
                        Valider
                      </button>
                    </div>
                  </div>
                </div>


              </div>
              
                  <div class="col-sm-4" ng-show="clientActif.blackMode==true">


              <div class="form-group">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <label class="input-group-text ms-Label is-required">Declaree</label>
                  </div>
                  <div class="input-group-prepend">
                    <div class="input-group-text">
                      <label class="checkbox checkbox-square checkbox-primary">
                        <input type="checkbox" class="form-control"
                          ng-model="reglementCourante.declarer" ng-change="getCurrentReferenceByDateAndDeclaree(reglementCourante.date,reglementCourante.declarer)"
                          />

                        <span></span></label>
                    </div>
                  </div>
                </div>
              </div>
            </div>


            </div>


            <div class="form-group alert alert-info">
              <div class="row">
                <div class="col-sm-3">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text ms-Label">Mont.BL R&eacute;gl&eacute;</label>
                      </div>
                      <input class="form-control" readonly="readonly"
                        value="{{reglementCourante.montantBlRegle }}" />
                    </div>
                  </div>

                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text ms-Label">Mont BL Non R&eacute;gl&eacute;</label>
                      </div>
                      <input class="form-control" readonly="readonly"
                        value="{{reglementCourante.montantBlNonRegle }}" />
                    </div>
                  </div>

                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text ms-Label">Nb BL Réglé</label>
                      </div>
           <input class="form-control" readonly="readonly"
                        value="{{reglementCourante.nombreBlRegle }}" /> 
                    </div>
                  </div>

                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text ms-Label">Nb BL Non R&eacute;gl&eacute;</label>
                      </div>
                      <input class="form-control" readonly="readonly"
                        value="{{reglementCourante.nombreBlNonRegle }}" />
                    </div>
                  </div>

                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text ms-Label">Mont.Fac R&eacute;gl&eacute;</label>
                      </div>
                      <input class="form-control" readonly="readonly"
                        value="{{reglementCourante.montantFactureRegle}}" />
                    </div>
                  </div>

                </div>
                
                <div class="col-sm-3">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text ms-Label">MontFact Non R&eacute;gl&eacute;</label>
                      </div>
                      <input class="form-control" readonly="readonly"
                        value="{{reglementCourante.montantFactureNonRegle }}" />
                    </div>
                  </div>
                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text ms-Label">Nb.Fact  Réglé</label>
                      </div>
                      <input class="form-control" readonly="readonly"
                        value="{{reglementCourante.nombreFactureRegle }}" />
                    </div>
                  </div>
                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text ms-Label">Nb.Fact  Non Regle</label>
                      </div>
                      <input class="form-control" readonly="readonly"
                        value="{{reglementCourante.nombreFactureNonRegle }}" />
                    </div>
                  </div>
                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text ms-Label">Mont.Fac.Avoir R&eacute;gl&eacute;</label>
                      </div>
                      <input class="form-control" readonly="readonly"
                        value="{{reglementCourante.montantFactureAvoirRegle }}" />
                    </div>
                  </div>

                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text ms-Label">Total.F Avoir Non R&eacute;gl&eacute;</label>
                      </div>
                      <input class="form-control" readonly="readonly"
                        value="{{reglementCourante.montantFactureAvoirNonRegle }}" />
                    </div>
                  </div>
                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text ms-Label">Nb.Fact Avoir Réglé</label>
                      </div>
                      <input class="form-control" readonly="readonly"
                        value="{{reglementCourante.nombreFactureAvoirRegle }}" />
                    </div>
                  </div>
                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <label class="input-group-text ms-Label">Nb.F Avoir Non Regle</label>
                      </div>
                      <input class="form-control" readonly="readonly"
                        value="{{reglementCourante.nombreFactureAvoirNonRegle}}" />
                    </div>
                  </div>
                </div> 
               
              </div>
            </div>
          </form>
        </div>


        <br />
        <span class="ms-ListItem-primaryText line" style="font-size:130%">D&eacute;tails R&eacute;glement</span>

        <div class="col-md-12" ng-show="!isEnCoursValider">
          <div class="row">
            <table class="table table-bordered  table-head-color" style="display: block;
                      overflow-y: auto; width:200%">
              <thead>
                <tr>
                     <th ng-show="modePdf == 'actif'" >
                      Ref.
                    </th>
                   <th>Type</th>
                   <th style="width : 15%;">N&deg; pi&eacute;ce</th>
                   <th style="width : 15%;">Banque</th>
             
                    
                  <th style="width : 20%;">Montant</th>
                  <th style="width : 10%;">Emission</th>
                  <th style="width : 10%;">Ech&eacute;ance</th>
                  <th style="width : 5%;">Regl&eacute;</th>
                  <th style="width : 20%;">Observation</th>
                  
                        <th style="width : 15%;">Banque Soc.</th>
                   <th style="width : 20%;" >D.Depot B.</th>
                   <th style="width : 20%;">Charge B.</th>
                   <th style="width : 20%;">TVA B.</th>
                  
                  
                  <th>
                    <span class="ms-CommandButton-icon float-right" ng-click="addElement()">
                      <a href="javascript:void(0)">
                        <i class="ms-Icon ms-Icon--CirclePlus" style="color: #fff !important ;">
                        </i>
                      </a>
                    </span>
                  </th>
                </tr>
              </thead>
              <tbody ng-model="finalOperationsList">
                <tr ng-repeat="item in finalOperationsList track by $index ">
                
                
                   <td  ng-show="modePdf == 'actif'">
                      
                        <input style="border-radius: 5px ; height:37px ; width:170px ; border: 1px solid #e5eaee !important;" ng-model="item.reference" />
                   
                    </td>
                  
                
                  <td>
                       
                      <select ui-select2 ng-model="item.typeReglementId" data-placeholder="..." 
                      style="border-radius: 5px ; height:37px ; width : 130px ; border: 1px solid #e5eaee !important;
                     padding-top : 7px ; padding-left : 2px"  ng-change="onChangeTypeReglement(item,$index)">
                        <option value="">Tous</option>
                        <option ng-repeat="pi in listTypes" value="{{pi.id}}">{{pi.designation}}</option>
                      </select>
                 
                  </td>
                  <td>
          
                      <input style="border-radius: 5px ; height:37px ; width:150px ;border: 1px solid #e5eaee !important;" ng-model="item.numPiece" />
                 
                  </td>
              <!--     <td>
                    <div class="form-group">
                      <input class="form-control" ng-model="item.banque" />
                    </div>
                  </td> -->
                  
                  
        
                  
                  <td>
                    
                      <select ui-select2 ng-model="item.banque" data-placeholder="..." 
                      style="border-radius: 5px ; height:37px ; width : 170px ; border: 1px solid #e5eaee !important;
                     padding-top : 7px ; padding-left : 2px">
                        <option value=""></option>
                                 <option ng-repeat="categorie in listeBanque" value="{{categorie.abreviation}}">{{categorie.code}}/{{categorie.abreviation}}</option>
                                
                      </select>
                  
                  </td>
                  
                  
                    
                
                  
                  <td>
                
                      <input type="text" 
                      style="border-radius: 5px ; height:37px ; width:150px ;border: 1px solid #e5eaee !important;"
                       ng-model="item.montant" />
                 
                  </td>
                  <td>


                        <input type="date"
                        style="border-radius: 5px ; height:37px ; width:150px ;border: 1px solid #e5eaee !important;"
                         datepicker-popup="{{format}}"
                          ng-model="item.dateEmission" ng-change="VerifieRegle(item,$index)" />


                  </td>
                  <td>



                        <input type="date"
                        style="border-radius: 5px ; height:37px ; width:150px ;border: 1px solid #e5eaee !important;"
                        datepicker-popup="{{format}}"
                          ng-model="item.dateEcheance" ng-change="VerifieRegle(item,$index)" />

           

                  </td>
                  <td>
                  
                      <input type="checkbox" ng-model="item.regle" />
              
                  </td>
                  <td>
              
                      <input 
                      style="border-radius: 5px ; height:37px ; width:150px ;border: 1px solid #e5eaee !important;"
                       ng-model="item.observation" />
            
                  </td>
                  
                  
                    <td>
                    
                      <select ui-select2 ng-model="item.banqueSociete" data-placeholder="..." 
                      style="border-radius: 5px ; height:37px ; width : 170px ; border: 1px solid #e5eaee !important;
                     padding-top : 7px ; padding-left : 2px">
                        <option value=""></option>
                                 <option ng-repeat="categorie in listeBanque | filter : {societe : true}" value="{{categorie.abreviation}}">{{categorie.code}}/{{categorie.abreviation}}</option>
                                
                      </select>
                  
                  </td>
                  
                  
                    <td>



                        <input type="date" 
                        style="border-radius: 5px ; height:37px ; width:150px ;border: 1px solid #e5eaee !important;"
                         datepicker-popup="{{format}}"
                          ng-model="item.dateDepotBanque" />


                  

                  </td>
                  
                  
                    <td>
                
                      <input type="number" 
                      style="border-radius: 5px ; height:37px ; width:150px ;border: 1px solid #e5eaee !important;"
                       ng-model="item.chargeBanque" />
                   
                  </td>
                  
                  
                       <td>
                 
                      <input type="number" 
                      style="border-radius: 5px ; height:37px ; width:150px ;border: 1px solid #e5eaee !important;"
                       ng-model="item.tvaBanque" />
               
                  </td>
                  
                  
                  
                  <td>
            
                      <button class="btn btn-sm" ng-click="removeDetailRegelement($index)">
                        <i class="ms-Icon ms-Icon--Delete ms-Icon-Gpro"> </i>
                      </button>
                    
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>



        <div class="center" ng-show="isEnCoursValider" ng-click="isEnCoursValider =false">
          <div class="center">
            <div class="lds-spinner">
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
              <div></div>
            </div>
          </div>

          <div class="center">{{msgChargement}}</div>
        </div>
        <div class="row" ng-show="!isEnCoursValider">
          <div class="col-sm-6 BL_FACT_Reglement" ng-show="clientActif.reglementBl==true">


            <div class="title-ajout row">
              <div class="col-sm-7">
                <span class="ms-ListItem-primaryText ms-Item-Gpro" style="font-size:130%">
                  Liste des BL</span>
              </div>
              <div class="col-sm-4 pull-right" style="top: 25px !important;">
                <div class="ms-SearchBox">
                  <input class="ms-SearchBox-field" type="text" value="" ng-model="bonLivraisonReferenceFilter" />
                  <label class="ms-SearchBox-label">
                    <i class="ms-SearchBox-icon ms-Icon ms-Icon--Search"></i>
                    <span class="ms-SearchBox-text">Search</span>
                  </label>
                  <div class="ms-CommandButton ms-SearchBox-clear ms-CommandButton--noLabel">
                    <button class="ms-CommandButton-button">
                      <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Clear"></i></span>
                      <span class="ms-CommandButton-label"></span>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="panel-body">
              <div class="row">
                <table class="table table-bordered table-condensed table-head-color">
                  <thead>
                    <tr>
                      <th>
                        <input type="checkbox" ng-model="selectedAllBL" ng-change="checkAllBL()" />
                      </th>
                      <th>N&deg; BL</th>
                      <th>Date</th>
                      <th>Montant BL</th>
                      <th>Montant R&eacute;gl&eacute;</th>
                    </tr>
                  </thead>
                  <tbody ng-model="finalBLList">
                    <tr
                      ng-repeat="item in finalBLList | filter:{'numBL':bonLivraisonReferenceFilter} track by item.id ">
                      <td style="width: 3%;">
                        <input type="checkbox" class="chkbox" ng-model="item.checked"
                          ng-change="changeMontantLBLById(item.checked,item.id)" />
                      </td>
                      <td style="width: 12%;">
                        <input class="form-control" readonly="readonly" value="{{item.numBL}}" />
                      </td>
                      <td style="width: 8%;">
                        <input class="form-control" readonly="readonly" value="{{item.date | date}}" />
                      </td>
                      <td style="width: 10%;">
                        <input class="form-control" readonly="readonly" value="{{item.montantBL}}" />
                      </td>
                      <td style="width: 10%;">
                        <input type="number" class="form-control" ng-model="item.montantRegle" id="inputMontantBL"
                          ng-disabled="item.disable" />
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
         
          <div class="col-sm-6 BL_FACT_Reglement">


            <div class="title-ajout row">
              <div class="col-sm-7">
                <span class="ms-ListItem-primaryText ms-Item-Gpro" style="font-size:130%">Liste des Factures</span>
              </div>
              <div class="col-sm-4 pull-right" style="top: 25px !important;">
                <div class="ms-SearchBox">
                  <input class="ms-SearchBox-field" type="text" value="" ng-model="factureReferenceFilter" />
                  <label class="ms-SearchBox-label">
                    <i class="ms-SearchBox-icon ms-Icon ms-Icon--Search"></i>
                    <span class="ms-SearchBox-text">Search</span>
                  </label>
                  <div class="ms-CommandButton ms-SearchBox-clear ms-CommandButton--noLabel">
                    <button class="ms-CommandButton-button">
                      <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Clear"></i></span>
                      <span class="ms-CommandButton-label"></span>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!--style="
                      height: 400px;
                      display: block;
                      overflow-y: auto;
                      overflow-x: hidden;
                    "-->

            <div class="panel-body">
              <div class="row">
                <table class="table table-bordered table-condensed table-head-color">
                  <thead>
                    <tr>
                      <th>
                        <input type="checkbox" ng-model="selectedAllFactures" ng-change="checkAllFactures()" />
                      </th>
                      <th>N&deg; Facture</th>
                      <th>Date</th>
                      <th>Montant Facture</th>
                      <th>
                        Montant R&eacute;gl&eacute;
                      </th>
                    </tr>
                  </thead>
                  <tbody ng-model="finalFacturesList">
                    <tr
                      ng-repeat="item in finalFacturesList  | filter:{'numFacture' :factureReferenceFilter} track by item.id ">
                      <td>
                        <input type="checkbox" class="chkbox" ng-model="item.checked"
                          ng-change="changeMontantLFacturesById(item.checked,item.id)" />
                      </td>
                      <td>
                        <input class="form-control" readonly="readonly" value="{{item.numFacture}}" />
                      </td>
                      <td>
                        <input class="form-control" readonly="readonly" value="{{item.date | date}}" />
                      </td>
                      <td>
                        <input class="form-control" readonly="readonly" value="{{item.montantFacture}}" />
                      </td>
                      <td>
                        <input type="number" class="form-control" ng-model="item.montantRegle" id="inputMontantFacture"
                          ng-disabled="item.disable" />
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="col-sm-6 BL_FACT_Reglement" ng-show="clientActif.reglementAvoir==true" >
  
  
            <div class="title-ajout row">
              <div class="col-sm-7">
                <span class="ms-ListItem-primaryText ms-Item-Gpro" style="font-size:130%">Liste des Factures Avoir </span>
              </div>
              <div class="col-sm-4 pull-right" style="top: 25px !important;">
                <div class="ms-SearchBox">
                  <input class="ms-SearchBox-field" type="text" value="" ng-model="factureReferenceFilter" />
                  <label class="ms-SearchBox-label">
                    <i class="ms-SearchBox-icon ms-Icon ms-Icon--Search"></i>
                    <span class="ms-SearchBox-text">Search</span>
                  </label>
                  <div class="ms-CommandButton ms-SearchBox-clear ms-CommandButton--noLabel">
                    <button class="ms-CommandButton-button">
                      <span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Clear"></i></span>
                      <span class="ms-CommandButton-label"></span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
  
            <!--style="
                      height: 400px;
                      display: block;
                      overflow-y: auto;
                      overflow-x: hidden;
                    "-->
  
            <div class="panel-body">
              <div class="row">
                <table class="table table-bordered table-condensed table-head-color">
                  <thead>
                    <tr>
                      <th>
                        <input type="checkbox" ng-model="selectedAllFactures" ng-change="checkAllFacturesAvoir()" />
                      </th>
                      <th>N&deg; Facture</th>
                      <th>Date</th>
                      <th>Montant Facture</th>
                      <th>
                        Montant R&eacute;gl&eacute;
                      </th>
                    </tr>
                  </thead>
                  <tbody ng-model="finalAvoirList">
                    <tr
                      ng-repeat="item in finalAvoirList  | filter:{'numFactureAvoir' :factureReferenceFilter} track by item.id ">
                      <td>
                        <input type="checkbox" class="chkbox" ng-model="item.checked"
                          ng-change="changeMontantLFacturesAvoirById(item.checked,item.id)" />
                      </td>
                      <td>
                        <input class="form-control" readonly="readonly" value="{{item.numFactureAvoir}}" />
                      </td>
                      <td>
                        <input class="form-control" readonly="readonly" value="{{item.dateAvoir | date}}" />
                      </td>
                      <td>
                        <input class="form-control" readonly="readonly" value="{{item.montantFactureAvoir}}" />
                      </td>
                      <td>
                        <input type="number" class="form-control" ng-model="item.montantRegleAvoir" id="inputMontantFactureAvoir"
                          ng-disabled="item.disable" />
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        


        <div class="row" ng-show="!isEnCoursValider">
          <div class="col-sm-12 elementReglement">

            <span class="ms-ListItem-primaryText">list Element R&eacute;glement</span>
            <div class="panel-body">
              <div class="row">
                <table class="table table-bordered table-condensed table-head-color">
                  <thead>
                    <tr>
                      <th>
                      Type
                      </th>
                      <th>R&eacute;f</th>
                      <th>Montant</th>
                      <th>Date</th>
                      <th>
                        <span class="ms-CommandButton-icon float-right" ng-click="addElementReglement()">
                          <a href="javascript:void(0)">
                            <i class="ms-Icon ms-Icon--CirclePlus" style="color: #fff !important ;">
                            </i>
                          </a>
                        </span>
                      </th>
                    </tr>
                  </thead>
                  <tbody ng-model="finalElementList">
                    <tr ng-repeat="item in finalElementList track by $index ">
                      <td>
                        <div class="form-group">
                          <!-- <input type="checkbox" class="chkbox" ng-model="finalElementList[$index].checked"
                            ng-change="changeMontantLBL(finalElementList[$index].checked,$index)"
                            ng-disabled="!finalElementList[$index].isNew" /> -->
                            <select id="typeListe" name="typeListe" ng-model="finalElementList[$index].typeListe" 
                              ng-change="changeMontantLBL(finalElementList[$index].typeListe,$index)" ng-disabled="!finalElementList[$index].isNew">
                              <option value="normal">Facture</option>
                              <option value="bl">Bl</option>
                              <option value="avoir">Avoir</option>
                            </select>
                        </div>
                      </td>

                      <td>


                        <div ng-if="!finalElementList[$index].isNew" ng-disabled="!finalElementList[$index].isNew">
                          <div class="form-group">
                            <input class="form-control" ng-show="finalElementList[$index].typeListe=='normal'"
                              ng-model="item.refFacture" />

                            <input class="form-control" ng-show="finalElementList[$index].typeListe=='bl'"
                              ng-model="item.refBL" />
                              <input class="form-control" ng-show="finalElementList[$index].typeListe=='avoir'"
                              ng-model="item.refAvoir" /> 
                              
                          </div>
                        </div>

                        <div ng-if="finalElementList[$index].isNew">
                          <div class="form-group">
                            <select ui-select2 ng-model="finalElementList[$index].refFacture"
                            ng-show="finalElementList[$index].typeListe=='normal'" data-placeholder="- Select Facture -"
                              ng-change="onChangeRefFacture(finalElementList[$index].refFacture,$index)"
                              class="form-control" style="border: 1px solid #e5eaee !important;">
                              <option value="">Tous Normal</option>
                              <option ng-repeat="facture in listRefFacture" refresh="refreshList()"
                                value="{{facture.numFacture}}">{{facture.numFacture}}</option>
                            </select>

                            <select ui-select2 ng-model="finalElementList[$index].refBL"
                            ng-show="finalElementList[$index].typeListe=='bl'" data-placeholder="- Select BL -"
                              ng-change="onChangeRefBL(finalElementList[$index].refBL,$index)" class="form-control"
                              style="border: 1px solid #e5eaee !important;">
                              <option value="">Tous Bl</option>
                              <option ng-repeat="bl in listRefBL" value="{{bl.numBL}}">{{bl.numBL}}</option>
                            </select>
                             <select ui-select2 ng-model="finalElementList[$index].refAvoir"
                             ng-show="finalElementList[$index].typeListe=='avoir'" data-placeholder="- Select Facture Avoir  -"
                            ng-change="onChangeRefFactureAvoir(finalElementList[$index].refAvoir,$index)" class="form-control"
                            style="border: 1px solid #e5eaee !important;">
                            <option value="">Tous Avoir </option>
                            <option ng-repeat="avoir in listRefAvoir"  value="{{avoir.numFactureAvoir}}" >{{avoir.numFactureAvoir}}</option>
                          </select> 
                          </div>
                        </div>
                      </td>

                      <td>
                        <div class="form-group">
                          <input class="form-control" ng-model="item.montantDemande" type="number" />
                        </div>
                      </td>
                      <td>

                        <div class="form-group">
                          <div class="input-group">

                            <input type="date" class="form-control " datepicker-popup="{{format}}"
                              ng-model="item.dateEcheance" />

                          </div>
                        </div>


                      </td>
                      <td>
                        <button data-nodrag class="btn " ng-click="deleteElement(item,$index)">
                          <i class="ms-Icon ms-Icon--Delete ms-Icon-Gpro">
                          </i>
                        </button>


                        <button data-nodrag class="btn " ng-click="showPanelDetailBlorFacture(item,$index)">
                          <i class="ms-Icon ms-Icon--AlignCenter ms-Icon-Gpro">
                          </i>
                        </button>



                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>


            </div>
          </div>
        </div>
      </div>
    </div>


    <div class="ms-PanelExample" >
      <button class="ms-Button"  id="btnPanelShowDetailBLorFacture" ng-hide="true">
        <span class="ms-Button-label"></span> 
      </button>
      <div class="ms-Panel ms-Panel--xxl" style="margin-top:150px;">
        <button class="ms-Panel-closeButton ms-PanelAction-close">
          <i class="ms-Panel-closeIcon ms-Icon ms-Icon--Cancel"></i>
        </button>
        <div class="ms-Panel-contentInner">
          <p class="ms-Panel-headerText">{{currentFactureOrBl.reference}}</p>

     <!--      <div class="ms-CommandButton" permission="['Article_Edit']">
            <button class="ms-CommandButton-button"
              ng-click="sauvegarderAjoutProduit(produitCourante,false)">
              <span class="ms-CommandButton-icon"><i
                class="ms-Icon ms-Icon--Save"></i></span> <span
                class="ms-CommandButton-label">Enregistrer</span>
            </button>
          </div> -->

          <br />
          <br />


          <div class="ms-Panel-content">
         <!--    <span class="ms-font-m">Content goes here</span> --> 

         <table class="table table-bordered table-hover table-condensed table-head-color"
        >
         <thead>
           <tr style="font-weight: bold;">



             <th style="width: 20%">Ref.Article</th>
             <th style="width: 30%">Article</th>
          
             <th style="width: 7%">Quantite</th>
             <!-- 			<th style="width: 10%">Unité</th> -->
             <th style="width: 8%">P.U.H.T</th>
             <th style="width: 7%">Remise</th>
             <th style="width: 9%">P.T.H.T</th>

             <th style="width: 9%">P.T.T.T.C</th>


           </tr>
         </thead>
         <tr ng-repeat="detFactureVente in currentFactureOrBl.detail">
           <td>{{ detFactureVente.produitReference || 'empty' }}</td>
           <td>{{ detFactureVente.produitDesignation || 'empty' }}</td>
           
           <td>{{ detFactureVente.quantite }}</td>

           <td>{{ detFactureVente.prixUnitaireHT }}</td>
           <td>
             <input type="number" class="form-control" ng-change="remiseChanged($index)"
               ng-model="detFactureVente.remise" placeholder="{{detFactureVente.remise}}"  disabled/>
           </td>
           <td>{{ detFactureVente.prixTotalHT | prixFiltre }}</td>

           <td ng-show="currentFactureOrBl.type == 'BL'">{{ detFactureVente.quantite * detFactureVente.prixTTC   | prixFiltre }}</td>

           <td ng-show="currentFactureOrBl.type == 'Facture'">{{ detFactureVente.quantite * calculerPUTTC(detFactureVente.prixUnitaireHT,detFactureVente.taxeId) | prixFiltre}}</td>

         </tr>
       </table>
     


          </div>
        </div>
      </div>
    </div>





    <div class="col-md-12">

      <!-- Documents -->
      <!-- <div class="title-ajout">Documents</div> -->

      <br />
      <span class="ms-ListItem-primaryText line" style="font-size:130%">Documents</span>
      
      <div  ng-show="displayMode == 'edit'">
        
          <div class="row" style="margin-left:0%;width:100%">

            <table class="table table-bordered table-condensed table-head-color">
              <thead>
                <tr>
                  <th class="hidden" style="width: 10%">Id</th>
                  <th style="width: 30%">Type Document</th>
                  <th style="width: 40%">Document</th>
                  <th><span class="ms-CommandButton-icon float-right" ng-click="ajoutDocumentProduit()">
                      <a href="javascript:void(0)">
                        <i class="ms-Icon ms-Icon--CirclePlus" style="color: #fff !important ;"> </i>
                      </a>
                    </span></th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="documentProduit in listeDocumentProduit">
                  <td class="hidden">
                    <!-- editable documentProduit (text with validation) --> <span editable-text="documentProduit.id"
                      e-name="id" e-form="rowform" e-required> {{ documentProduit.id
                            || 'empty' }} </span>
                  </td>
                  <td>
                    <!-- editable group (select-remote) --> <span editable-select="documentProduit.typeDocumentId"
                      e-ng-options="s.id as s.designation for s in listeTypeDocumentsCache" e-name="idTypeDocPROD"
                      e-form="rowform">
                      {{showStatus(documentProduit.typeDocumentId)}} </span>
                    <!-- {{documentProduit.typeDocumentId }} -->
                  </td>
                  <td ng-controller="UploadCtrl">
                    <!-- Upload Document File -->
                    <div class="form-group">
                      <div class="col-sm-12">
                        <div class="fileinput fileinput-new" data-provides="fileinput">
                          <input class="hidden" type="text" ng-model="name" /> <span class="btn btn-file btn-sm" style="color: rgb(54, 153, 255);
                                                        background-color: rgb(225, 240, 255);
                                                        border-color: transparent" ng-show="!isUploaded && rowform.$visible"> <span
                              class="fileinput-new">Selectionner fichier</span> <input type="file"
                              class="custom-file-input" file-model="myFile"> <span href="#"
                              class="close fileinput-exists pull-right" style="float: none; padding: 0"
                              data-dismiss="fileinput" ng-show="!isUploaded && rowform.$visible">x</span>
                          </span> <span class="fileinput-filename" ng-model="documentProduit.path" e-name="path"
                            e-form="rowform" e-required>{{documentProduit.path}}</span>
                        </div>
                        <!-- <a class="btn btn-danger btn-sm pull-right" style="margin-right: 10px; cursor: pointer"
                          ng-click="downloadFile(documentProduit.uidDocument, 'FINANCE_CLIENT_REGLEMENT')"><span
                            class="glyphicon glyphicon-cloud-download"></span></a> -->

                        <a class="btn  btn-sm pull-right" style="margin-right: 10px; cursor: pointer"
                          ng-click="downloadFile(documentProduit.uidDocument, 'FINANCE_CLIENT_REGLEMENT')">

                          <span class="svg-icon svg-icon-primary svg-icon-2x">
                            <!--begin::Svg Icon | path:C:\wamp64\www\keenthemes\themes\metronic\theme\html\demo1\dist/../src/media/svg/icons\Files\Download.svg--><svg
                              xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                              height="24px" viewBox="0 0 24 24" version="1.1">
                              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <rect x="0" y="0" width="24" height="24" />
                                <path
                                  d="M2,13 C2,12.5 2.5,12 3,12 C3.5,12 4,12.5 4,13 C4,13.3333333 4,15 4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 C2,15 2,13.3333333 2,13 Z"
                                  fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                <rect fill="#000000" opacity="0.3"
                                  transform="translate(12.000000, 8.000000) rotate(-180.000000) translate(-12.000000, -8.000000) "
                                  x="11" y="1" width="2" height="14" rx="1" />
                                <path
                                  d="M7.70710678,15.7071068 C7.31658249,16.0976311 6.68341751,16.0976311 6.29289322,15.7071068 C5.90236893,15.3165825 5.90236893,14.6834175 6.29289322,14.2928932 L11.2928932,9.29289322 C11.6689749,8.91681153 12.2736364,8.90091039 12.6689647,9.25670585 L17.6689647,13.7567059 C18.0794748,14.1261649 18.1127532,14.7584547 17.7432941,15.1689647 C17.3738351,15.5794748 16.7415453,15.6127532 16.3310353,15.2432941 L12.0362375,11.3779761 L7.70710678,15.7071068 Z"
                                  fill="#000000" fill-rule="nonzero"
                                  transform="translate(12.000004, 12.499999) rotate(-180.000000) translate(-12.000004, -12.499999) " />
                              </g>
                            </svg>
                            <!--end::Svg Icon--></span>




                        </a>



                        <!--                             
                            <a
                          ng-click="uploadFile('FINANCE_CLIENT_REGLEMENT')" ng-show="!isUploaded && rowform.$visible"
                          class="btn btn-info btn-sm fileinput-upload glyphicon glyphicon-cloud-upload pull-right">
                        </a> -->




                        <a ng-click="uploadFile('FINANCE_CLIENT_REGLEMENT')" ng-show="!isUploaded && rowform.$visible"
                          class="btn  btn-sm fileinput-upload  pull-right">



                          <span class="svg-icon svg-icon-primary svg-icon-2x">
                            <!--begin::Svg Icon | path:C:\wamp64\www\keenthemes\themes\metronic\theme\html\demo1\dist/../src/media/svg/icons\Files\Upload.svg--><svg
                              xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                              height="24px" viewBox="0 0 24 24" version="1.1">
                              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <rect x="0" y="0" width="24" height="24" />
                                <path
                                  d="M2,13 C2,12.5 2.5,12 3,12 C3.5,12 4,12.5 4,13 C4,13.3333333 4,15 4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 C2,15 2,13.3333333 2,13 Z"
                                  fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                <rect fill="#000000" opacity="0.3" x="11" y="2" width="2" height="14" rx="1" />
                                <path
                                  d="M12.0362375,3.37797611 L7.70710678,7.70710678 C7.31658249,8.09763107 6.68341751,8.09763107 6.29289322,7.70710678 C5.90236893,7.31658249 5.90236893,6.68341751 6.29289322,6.29289322 L11.2928932,1.29289322 C11.6689749,0.916811528 12.2736364,0.900910387 12.6689647,1.25670585 L17.6689647,5.75670585 C18.0794748,6.12616487 18.1127532,6.75845471 17.7432941,7.16896473 C17.3738351,7.57947475 16.7415453,7.61275317 16.3310353,7.24329415 L12.0362375,3.37797611 Z"
                                  fill="#000000" fill-rule="nonzero" />
                              </g>
                            </svg>
                            <!--end::Svg Icon--></span>


                        </a>

                      </div>
                    </div> <input class="hidden" ng-model="documentProduit.uidDocument" e-name="uidDocument"
                      e-form="rowform" e-required value="{{ documentProduit.uidDocument ||
                            'empty' }} " />
                  </td>


                  <td style="white-space: nowrap">
                    <!-- form -->
                    <form editable-form name="rowform" onbeforesave="saveDocumentProduit($data, documentProduit.id)"
                      ng-show="rowform.$visible" class="form-buttons form-inline float-right"
                      shown="DocumentProduitInserree == documentProduit">
                      <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-sm "
                        aria-hidden="true">
                        <i class="ms-Icon ms-Icon--Download" aria-hidden="true"></i>
                      
                      </button>
                      <button type="button" ng-disabled="rowform.$waiting"
                        ng-click="cancelAddProduit(rowform, $index, documentProduit.id, documentProduit.typeDocumentId, listeDocumentProduit )"
                        class="btn btn-sm ">
                        <i class="ms-Icon ms-Icon--Cancel" aria-hidden="true"></i>
                      
                      </button>
                    </form>
                    <div class="buttons float-right" ng-show="!rowform.$visible">
                      <button data-nodrag class="btn btn-sm"
                        ng-click="rowform.$show()">
                      
                          <i class="ms-Icon ms-Icon--Edit" aria-hidden="true"></i>
                      </button>
                      <button data-nodrag class="btn btn-sm"
                        ng-click="removeDocumentProduit($index)">
                          <i class="ms-Icon ms-Icon--Delete" aria-hidden="true"></i>
                      
                      </button>
                    </div>
                  </td>
                </tr>

              </tbody>
            </table>


          </div>
        
      </div>
    </div>

  </div>


  <div class="row" ng-show="displayMode != 'edit'">
  <div class="col-sm-12">
    <div class="col-md-12" style="margin-left:1%; width:98%">

      <span class="ms-ListItem-primaryText line" style="font-size:130%">Liste des reglements</span>

      <div style="height: 500px;" ng-grid="gridOptions"></div>
    </div>
    </div>
  </div>


  <div id="light" class="white_content">
    <pop-up type="delete-article"></pop-up>
  </div>
  <div id="fade" class="black_overlay"></div>

</div>