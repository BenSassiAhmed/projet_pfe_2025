
<script type="text/javascript">

  var SearchBoxElements = document.querySelectorAll(".ms-SearchBox");
  for (var i = 0; i < SearchBoxElements.length; i++) {
    new fabric['SearchBox'](SearchBoxElements[i]);
  }

</script> 


<div ng-controller="transfertBonTransfertReceptionController"
	style="background-color: #fff;">

	<div class="row" ng-show="displayMode != 'edit'">
		<div class="col-sm-12">


			<div class="panel-body">
				<span class="ms-ListItem-secondaryText float-right font-italic">
					<b> Bon de Transfert Reception</b>
				</span> <span class="ms-ListItem-primaryText">Crit&eacute;re de
					Recherche</span> <br />
				<div class="ms-CommandBar ms-CommandBar--navBar">
					<div class="ms-CommandBar-sideCommands">
						<div class="ms-SearchBox ms-SearchBox--commandBar">
							<input class="ms-SearchBox-field" type="text" value=""
								ng-model="filterOptions.filterText" /> <label
								class="ms-SearchBox-label"> <i
								class="ms-SearchBox-icon ms-Icon ms-Icon--Search"></i> <span
								class="ms-SearchBox-text">Rechercher</span>
							</label>
							<div
								class="ms-CommandButton ms-SearchBox-clear ms-CommandButton--noLabel">
								<button class="ms-CommandButton-button">
									<span class="ms-CommandButton-icon"><i
										class="ms-Icon ms-Icon--Cancel"></i></span> <span
										class="ms-CommandButton-label"></span>
								</button>
							</div>
							<div
								class="ms-CommandButton ms-SearchBox-exit ms-CommandButton--noLabel">
								<button class="ms-CommandButton-button">
									<span class="ms-CommandButton-icon"><i
										class="ms-Icon ms-Icon--ChromeBack"></i></span> <span
										class="ms-CommandButton-label"></span>
								</button>
							</div>
							<div
								class="ms-CommandButton ms-SearchBox-filter ms-CommandButton--noLabel">
								<button class="ms-CommandButton-button">
									<span class="ms-CommandButton-icon"><i
										class="ms-Icon ms-Icon--Filter"></i></span> <span
										class="ms-CommandButton-label"></span>
								</button>
							</div>
						</div>

						<div class="ms-CommandButton ms-CommandButton--noLabel">
							<button class="ms-CommandButton-button">
								<span class="ms-CommandButton-icon ms-fontColor-themePrimary"><i
									class="ms-Icon ms-Icon--Info"></i></span> <span
									class="ms-CommandButton-label"></span>
							</button>
						</div>
					</div>
					<div class="ms-CommandBar-mainArea">


						<div class="ms-CommandButton">
							<button class="ms-CommandButton-button"
								ng-click="AffectationAchatBC()" ng-disabled="">
								<span class="ms-CommandButton-icon"><i
									class="ms-Icon ms-Icon--CirclePlus"></i></span> <span
									class="ms-CommandButton-label">Ajouter</span>
							</button>
						</div>


						<div class="ms-CommandButton">
							<button class="ms-CommandButton-button"
								ng-click="downloadAllReceptionAchatExcel(bonTransfertReceptionCourante)">
								<span class="ms-CommandButton-icon"><i
									class="ms-Icon ms-Icon--Generate"></i></span> <span
									class="ms-CommandButton-label">G&eacute;n&eacute;rer</span>
							</button>
						</div>
						<div class="ms-CommandButton">
							<button class="ms-CommandButton-button"
								ng-click="rechercherReceptionAchat(bonTransfertReceptionCourante)">
								<span class="ms-CommandButton-icon"><i
									class="ms-Icon ms-Icon--FolderSearch"></i></span> <span
									class="ms-CommandButton-label">Rechercher</span>
							</button>
						</div>

						<div class="ms-CommandButton">
							<button class="ms-CommandButton-button" ng-click="annulerAjout()">
								<span class="ms-CommandButton-icon"><i
									class="ms-Icon ms-Icon--Cancel"></i></span> <span
									class="ms-CommandButton-label">Annuler</span>
							</button>
						</div>
						<div
							class="ms-CommandButton ms-CommandBar-overflowButton ms-CommandButton--noLabel">
							<button class="ms-CommandButton-button">
								<span class="ms-CommandButton-icon"><i
									class="ms-Icon ms-Icon--More"></i></span> <span
									class="ms-CommandButton-label"></span>
							</button>
							<ul class="ms-ContextualMenu is-opened">
								<li class="ms-ContextualMenu-item"><a
									class="ms-ContextualMenu-link" tabindex="1">Folder</a> <i
									class="ms-Icon ms-Icon--Folder"></i></li>
								<li
									class="ms-ContextualMenu-item ms-ContextualMenu-item--divider"></li>
								<li class="ms-ContextualMenu-item"><a
									class="ms-ContextualMenu-link" tabindex="1">Plain Text
										Document</a> <i class="ms-Icon ms-Icon--Document"></i></li>
								<li class="ms-ContextualMenu-item"><a
									class="ms-ContextualMenu-link" tabindex="1">A Coffee</a> <i
									class="ms-Icon ms-Icon--Coffee"></i></li>
								<li class="ms-ContextualMenu-item"><a
									class="ms-ContextualMenu-link" tabindex="1">Picture</a> <i
									class="ms-Icon ms-Icon--Picture"></i></li>
								<li class="ms-ContextualMenu-item"><a
									class="ms-ContextualMenu-link" tabindex="1">Money</a> <i
									class="ms-Icon ms-Icon--Money"></i></li>
							</ul>
						</div>
					</div>
				</div>

				<div class="panel panel-primary">
					<div class="panel-body">
						<form class="form-horizontal" id="rechercheSSForm"
							name="rechercheSSForm">
							<div class="row">
								<div class="col-sm-3">
									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text">R&eacute;f&eacute;rence</span>
											</div>
											<input type="text" class="form-control"
												ng-init="bonTransfertReceptionCourante.reference =''"
												ng-model="bonTransfertReceptionCourante.reference">
										</div>
									</div>
								</div>


								<div class="col-sm-3" ng-controller="DatepickerDemoController">




									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text"> Date de</span>
											</div>
											<input type="text" class="form-control datepicker"
												datepicker-popup="{{format}}"
												ng-init="bonTransfertReceptionCourante.dateDe =''"
												ng-model="bonTransfertReceptionCourante.dateDe"
												is-open="opened" datepicker-options="dateOptions"
												date-="enabled(date, mode)" ng-required="true"
												close-text="Close" />

											<div class="input-group-append">
												<button type="button" class="btn1 btn-default"
													ng-click="open($event)"
													style="color: rgb(54, 153, 255); background-color: rgb(225, 240, 255);">
													<i class="glyphicon glyphicon-calendar"
														style="color: #3699ff;"></i>
												</button>
											</div>
										</div>
									</div>



								</div>
								<div class="col-sm-3" ng-controller="DatepickerDemoController">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text"> A</span>
											</div>
											<input type="text" class="form-control datepicker"
												datepicker-popup="{{format}}"
												ng-init="bonTransfertReceptionCourante.dateA =''"
												ng-model="bonTransfertReceptionCourante.dateA"
												is-open="opened" datepicker-options="dateOptions"
												date-="enabled(date, mode)" ng-required="true"
												close-text="Close" />

											<div class="input-group-append">
												<button type="button" class="btn1 btn-default"
													ng-click="open($event)"
													style="color: rgb(54, 153, 255); background-color: rgb(225, 240, 255);">
													<i class="glyphicon glyphicon-calendar"
														style="color: #3699ff;"></i>
												</button>
											</div>
										</div>
									</div>





								</div>








							</div>





							<div class="row">


								<div class="col-sm-3">
									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text">Origine</span>
											</div>
											<select ui-select2
												ng-model="bonTransfertReceptionCourante.idDepotOrigine"
												ng-init="bonTransfertReceptionCourante.idDepotOrigine =''"
												data-placeholder="" class="form-control "
												style="border: 1px solid #e5eaee !important;">
												<option value="">Tous les Magasins</option>
												<option ng-repeat="magazin in listeMagazinCache"
													value="{{magazin.id}}">{{magazin.designation}}</option>
											</select>
										</div>
									</div>
								</div>
								
								
										<div class="col-sm-3">
									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text">Destination</span>
											</div>
											<select ui-select2
												ng-model="bonTransfertReceptionCourante.idDepotDestination"
												ng-init="bonTransfertReceptionCourante.idDepotDestination =''"
												data-placeholder="" class="form-control "
												style="border: 1px solid #e5eaee !important;">
												<option value="">Tous les Magasins</option>
												<option ng-repeat="magazin in listeMagazinCache"
													value="{{magazin.id}}">{{magazin.designation}}</option>
											</select>
										</div>
									</div>
								</div>
								
								
							    	<div class="col-sm-3">
										<div class="form-group">
											<div class="input-group">
												<div class="input-group-prepend">
													<span class="input-group-text">Status</span>
												</div>
												<select class="form-control"
													ng-model="bonTransfertReceptionCourante.status"
													
													ng-init="bonTransfertReceptionCourante.status =''"
													data-placeholder="">

													<option value="Conforme">Conforme</option>
													<option value="Non Conforme">Non Conforme</option>
														
												</select>
											</div>
										</div>
									</div>


							</div>


						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row" ng-show="displayMode != 'edit'">
		<div class="col-sm-12">


			<div class="panel-body">
				<div class="col-md-12">
					<span class="ms-ListItem-primaryText line">Liste des Bons de
						transferts Receptions</span>

					<div style="height: 500px;" ng-grid="gridOptions"></div>
				</div>

			</div>

		</div>
	</div>






	<div class="row" ng-show="displayMode == 'edit'">
		<div class="col-sm-12">

			<div class="panel-body">

				<span class="ms-ListItem-secondaryText float-right font-italic">
					<b>Bon Transfert Reception</b>
				</span> <span class="ms-ListItem-primaryText" ng-show="modePdf != 'actif'">Cr&eacute;ation
					Bon Transfert Reception </span> <span class="ms-ListItem-primaryText"
					ng-show="modePdf == 'actif'">Modification Bon Transfert
					Reception </span> <br />
				<div class="ms-CommandBar ms-CommandBar--navBar">
					<div class="ms-CommandBar-sideCommands">
						<div class="ms-CommandButton ms-CommandButton--noLabel">
							<button class="ms-CommandButton-button">
								<span class="ms-CommandButton-icon ms-fontColor-themePrimary"><i
									class="ms-Icon ms-Icon--Info"></i></span> <span
									class="ms-CommandButton-label"></span>
							</button>
						</div>
					</div>
					<div class="ms-CommandBar-mainArea">
						<div class="ms-CommandButton" permission="['Transfert_Edit']">
							<button class="ms-CommandButton-button"
								ng-disabled=" !isValidSauvegarde()"
								ng-click="sauvegarderAjout(bonTransfertReceptionCourante)">
								<span class="ms-CommandButton-icon"><i
									class="ms-Icon ms-Icon--Save"></i></span> <span
									class="ms-CommandButton-label">Enregistrer</span>
							</button>
						</div>

						<div class="ms-CommandButton" ng-show="modePdf == 'actif'">
							<button class="ms-CommandButton-button"
								ng-click="downloadBonInventaire(bonTransfertReceptionCourante)">
								<span class="ms-CommandButton-icon"><i
									class="ms-Icon ms-Icon--Generate"></i></span> <span
									class="ms-CommandButton-label">G&eacute;n&eacute;rer</span>
							</button>
						</div>



						<div class="ms-CommandButton">
							<button class="ms-CommandButton-button" ng-click="annulerAjout()">
								<span class="ms-CommandButton-icon"><i
									class="ms-Icon ms-Icon--Back"></i></span> <span
									class="ms-CommandButton-label">Retour</span>
							</button>
						</div>
						<div
							class="ms-CommandButton ms-CommandBar-overflowButton ms-CommandButton--noLabel">
							<button class="ms-CommandButton-button">
								<span class="ms-CommandButton-icon"><i
									class="ms-Icon ms-Icon--More"></i></span> <span
									class="ms-CommandButton-label"></span>
							</button>
							<ul class="ms-ContextualMenu is-opened">
								<li class="ms-ContextualMenu-item"><a
									class="ms-ContextualMenu-link" tabindex="1">Folder</a> <i
									class="ms-Icon ms-Icon--Folder"></i></li>
								<li
									class="ms-ContextualMenu-item ms-ContextualMenu-item--divider"></li>
								<li class="ms-ContextualMenu-item"><a
									class="ms-ContextualMenu-link" tabindex="1">Plain Text
										Document</a> <i class="ms-Icon ms-Icon--Document"></i></li>
								<li class="ms-ContextualMenu-item"><a
									class="ms-ContextualMenu-link" tabindex="1">A Coffee</a> <i
									class="ms-Icon ms-Icon--Coffee"></i></li>
								<li class="ms-ContextualMenu-item"><a
									class="ms-ContextualMenu-link" tabindex="1">Picture</a> <i
									class="ms-Icon ms-Icon--Picture"></i></li>
								<li class="ms-ContextualMenu-item"><a
									class="ms-ContextualMenu-link" tabindex="1">Money</a> <i
									class="ms-Icon ms-Icon--Money"></i></li>
							</ul>
						</div>
					</div>
				</div>
				<div class="panel panel-primary">
					<div class="panel-body">
						<form name="creationSSForm">
							<div class="row" ng-hide="hiddenNotif">
								<div class="col-sm-8"></div>
								<div class="col-sm-4">



									<span> <alert type="success"
											class="alert-success-sauvegarde light"
											style="text-align: center !important; background-color: #1BC5BD !important">
										<span
											ng-bind-html="'Transfert Reception enregistrer avec succ&egrave;s.' | safe_html"></span>
										<a> <i class="fa fa-times close-notif"
											ng-click="closeNotif()" style="color: #fff !important;"></i>
										</a> </alert>
									</span>
								</div>
							</div>
							
							
						   <div class="row" ng-show="codeErrorCreation == 'CODE_ERROR_CREATION_BON_TRANSFERT_RECEPTION_INVALIDE_STOCK_IN_MAGASIN_ORIGINE'">
								<div class="col-sm-8"></div>
								<div class="col-sm-4">



									<span> <alert type="warning"
											class="alert-success-sauvegarde light"
											style="text-align: center !important; background-color: #FFA500 !important">
										<span
											ng-bind-html="'Stock Insuffisant au magasin origine' | safe_html"></span>
										<a> <i class="fa fa-times close-notif"
											ng-click="closeNotif()" style="color: #fff !important;"></i>
										</a> </alert>
									</span>
								</div>
							</div>
							
							
							
							
							
							
							
							<div class="row">
								<div class="col-sm-3">

									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text">R&eacute;f&eacute;rence</span>
											</div>
											<input type="text" class="form-control"
												ng-model="bonTransfertReceptionCourante.reference"
												ng-disabled="modePdf != 'actif' && clientActif.disableAchat">
										</div>
									</div>
								</div>

								<div class="col-sm-3" ng-controller="DatepickerDemoController">






									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text"> Date </span>
											</div>
											<input type="text" class="form-control datepicker"
												datepicker-popup="{{format}}"
												ng-model="bonTransfertReceptionCourante.date"
												is-open="opened" datepicker-options="dateOptions"
												date-disabled="enabled(date, mode)" close-text="Close" />

											<div class="input-group-append">
												<button type="button" class="btn1 btn-default"
													ng-click="open($event)"
													style="color: rgb(54, 153, 255); background-color: rgb(225, 240, 255);">
													<i class="glyphicon glyphicon-calendar"
														style="color: #3699ff;"></i>
												</button>
											</div>
										</div>
									</div>
								</div>




							</div>


							<div class="alert alert-primary">
								<div class="row">

									<div class="col-sm-4">
										<div class="form-group">
											<div class="input-group">
												<div class="input-group-prepend">
													<span class="input-group-text">Ref.BT Sortie</span>
												</div>
												<input class="form-control"
													ng-model="bonTransfertReceptionCourante.referenceSortie"
													ng-init="bonTransfertReceptionCourante.referenceSortie = ''"
													ng-change="validerBTSucess = false"
													ng-disabled="modePdf == 'actif'" />
												<div class="input-group-append">
													<button class="btn "
														style="color: rgb(54, 153, 255); background-color: rgb(225, 240, 255);"
														ng-show="modePdf != 'actif'" type="button"
														ng-style="validerBTSucess && myStyleBtnValiderAvoir"
														ng-click="validerBT(bonTransfertReceptionCourante.referenceSortie)"
														ng-disabled="isEnCoursValider || bonTransfertReceptionCourante.referenceSortie == ''">Valider
													</button>
												</div>
											</div>
										</div>
									</div>






									<div class="col-sm-3">
										<div class="form-group">
											<div class="input-group">
												<div class="input-group-prepend">
													<span class="input-group-text">Origine</span>
												</div>
												<select class="form-control"
													ng-model="bonTransfertReceptionCourante.idDepotOrigine"
													required
													ng-init="bonTransfertReceptionCourante.idDepotOrigine =''"
													data-placeholder="" disabled>

													<option ng-repeat="magazin in listeMagazinCache"
														value="{{magazin.id}}">{{magazin.designation}}</option>
												</select>
											</div>
										</div>
									</div>

									<div class="col-sm-3">
										<div class="form-group">
											<div class="input-group">
												<div class="input-group-prepend">
													<span class="input-group-text">Destination</span>
												</div>
												<select class="form-control"
													ng-model="bonTransfertReceptionCourante.idDepotDestination"
													required
													ng-init="bonTransfertReceptionCourante.idDepotDestination =''"
													data-placeholder="" disabled>

													<option ng-repeat="magazin in listeMagazinCache"
														value="{{magazin.id}}">{{magazin.designation}}</option>
												</select>
											</div>
										</div>
									</div>
									
									
									<div class="col-sm-3">
										<div class="form-group">
											<div class="input-group">
												<div class="input-group-prepend">
													<span class="input-group-text">Status</span>
												</div>
												<select class="form-control"
													ng-model="bonTransfertReceptionCourante.status"
													required
													ng-init="bonTransfertReceptionCourante.status =''"
													data-placeholder="">

													<option value="Conforme">Conforme</option>
													<option value="Non Conforme">Non Conforme</option>
														
												</select>
											</div>
										</div>
									</div>



								</div>

							</div>



							<div class="alert alert-primary">
								<div class="row">


									<div class="col-sm-12">
										<div class="form-group">
											<div class="input-group">
												<div class="input-group-prepend">
													<span class="input-group-text">Observations</span>
												</div>
												<textarea class="form-control"
													ng-model="bonTransfertReceptionCourante.observations"
													rows="2"></textarea>
											</div>
										</div>
									</div>






								</div>







							</div>





						</form>
					</div>
				</div>



				<span class="ms-ListItem-primaryText line">Articles</span>
				<div class="panel-body">
					<div class="form-group">
						<div class="row">




							<div ng-show="modePdf != 'actif'" class="w-100">
								<table
									class="table table-bordered table-condensed table-head-color">
									<thead>
										<tr>
											<th>R&eacute;f.Article</th>
											<th>Article</th>
											<th>Sous Famille</th>
											<th>Quantit&eacute;</th>
											<th>Qte Envoyee</th>

											<th>N&ordm;S</th>
											<th><span class="ms-CommandButton-icon float-right"
												ng-click="ajoutProduit()"> <a
													href="javascript:void(0)"> <i
														class="ms-Icon ms-Icon--CirclePlus"
														style="color: #fff !important;"> </i>
												</a>
											</span></th>





										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="produit in listDetBonTransfert">
											<td><select ui-select2 ng-model="produit.produitId"
												ng-change="clickProduit(produit.produitId, $index)"
												data-placeholder="..." class="form-control ">
													<option value="">Tous</option>
													<option ng-repeat="produit in listeProduitCache"
														value="{{produit.id}}">{{produit.reference}}</option>
											</select></td>

											<td><select ui-select2 ng-model="produit.produitId"
												ng-change="clickProduit(produit.produitId, $index)"
												data-placeholder="...">
													<option value="">Tous</option>
													<option ng-repeat="produit in listeProduitCache"
														value="{{produit.id}}">{{produit.designation}}</option>
											</select></td>

											<td><span e-form="rowform"> {{produit.sousFamille
													|| 'EMPTY' }} </span></td>
											<td><input type="number" class="form-control"
												ng-model="produit.quantite" />
												
											<td><input type="number" class="form-control"
												ng-model="produit.quantiteEnvoyer" disabled />
											<td
												ng-style="isSerialisable(produit.produitId) &&  produit.quantite !== produit.produitsSerialisable.length && {'background-color':'coral'}">
												<a class="fa fa-barcode"
												ng-if="isSerialisable(produit.produitId)"
												data-target="#SeriesModalUpdate{{$index}}"
												data-toggle="modal"> </a>



												<div class="modal fade" tabindex="-1"
													id="SeriesModalUpdate{{$index}}" data-keyboard="false"
													data-backdrop="static">
													<div class="modal-dialog modal-sm">
														<div class="modal-content"
															style="width: 700px !important; left: 50%; top: 0; display: block; position: absolute; margin: 100px auto !important; transform: translate(-50%, -0%); background-color: #fff; z-index: 1002;">
															<div class="modal-header">
																<button type="button" class="close" data-dismiss="modal">
																	&times;</button>
																<h4 class="modal-title">
																	{{getReferenceArticleAndDesignation(produit.produitId)}}</h4>
															</div>
															<div class="modal-body">
																<form>


																	<div class="row">
																		<div class="col-sm-6">

																			<div class="form-group">
																				<div class="input-group">
																					<div class="input-group-prepend">
																						<span class="input-group-text">N&ordm;
																							Serie</span>
																					</div>
																					<input type="text" class="form-control"
																						ng-init="numSerie =''" ng-model="numSerie"
																						ng-keypress="checkIfEnterKeyWasPressed($event,numSerie,$index)">
																				</div>
																			</div>



																		</div>
																		<div class="col-sm-1">
																			<button type="button" class="btn btn-primary"
																				ng-disabled="numSerie == null || numSerie == ''"
																				ng-click="ajouterNumSerieWS(numSerie,$index,produit.produitId)">Ajouter</button>

																		</div>


																	</div>



																	<table
																		class="table table-bordered table-condensed table-head-color">

																		<thead>
																			<tr>
																				<th style="width: 20%">N&ordm; Serie</th>

																				<th style="width: 20%">Fournisseur</th>
																				<th style="width: 18%">N&ordm; BR</th>
																				<th style="width: 20%">Client</th>
																				<th style="width: 18%">N&ordm; BL</th>



																				<th style="width: 4%"></th>
																			</tr>
																		</thead>

																		<tbody>
																			<tr
																				ng-repeat="produitSerialisable in produit.produitsSerialisable">
																				<td>{{produitSerialisable.numSerie}}</td>
																				<td>{{produitSerialisable.fournisseurAbreviation}}</td>

																				<td>{{produitSerialisable.numBonReception}}</td>


																				<td>{{produitSerialisable.partieIntersseDesignation}}</td>

																				<td>{{produitSerialisable.numBonLivraison}}</td>

																				<td class="pull-right"><button
																						permission="['Inventaire_Delete']"
																						class="btn btn-sm glyphicon glyphicon-trash"
																						ng-mousedown="removeNumSerie($parent.$index,$index)"></button></td>

																			</tr>

																		</tbody>
																	</table>





																</form>
															</div>
															<div class="modal-footer">

																<button type="button" class="btn btn-primary"
																	data-dismiss="modal">Retour</button>
															</div>
														</div>
													</div>
												</div>
											</td>


											<td style="white-space: nowrap">

												<form editable-form name="rowform"
													onbeforesave="saveProduit($data, produit.id)"
													ng-show="rowform.$visible" class="form-buttons form-inline"
													shown="produitInserree == produit">
													<button type="submit" ng-disabled="rowform.$waiting"
														class="btn btn-sm glyphicon glyphicon-save"
														aria-hidden="true"></button>
													<button type="button" ng-disabled="rowform.$waiting"
														ng-click="cancelAddReceptionAchat(rowform, $index,  produit.id, produit.produitId )"
														class="btn btn-sm glyphicon glyphicon-remove"></button>
												</form>
												<div class="buttons" ng-show="!rowform.$visible">

													<button data-nodrag
														class="btn btn-sm glyphicon glyphicon-trash"
														ng-click="removeProduit($index)"></button>
												</div>
											</td>
										</tr>
									</tbody>
								</table>

								<div ng-show="isLoading" class="col-sm-2"
									style="float: none; margin-left: auto; margin-right: auto; font-weight: bold;"
									class="col-sm-1">Chargement ...</div>

							</div>

							<div ng-show="modePdf == 'actif'" class="w-100">
								<table
									class="table table-bordered table-condensed table-head-color">
									<thead>
										<tr>
											<th>R&eacute;f.Article</th>
											<th>Article</th>
											<th>Sous Famille</th>
											<th>Quantit&eacute;</th>
											<th>Qte Envoyee</th>

											<th>N&ordm;S</th>
											<th><span class="ms-CommandButton-icon float-right"
												ng-click="ajoutProduit()"> <a
													href="javascript:void(0)"> <i
														class="ms-Icon ms-Icon--CirclePlus"
														style="color: #fff !important;"> </i>
												</a>
											</span></th>

										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="produit in listDetBonTransfert">
											<td><select ui-select2 ng-model="produit.produitId"
												ng-change="clickProduit(produit.produitId, $index)"
												data-placeholder="..." ng-disabled="produit.checked"
												class="form-control ">
													<option value="">Tous</option>
													<option ng-repeat="produit in listeProduitCache"
														value="{{produit.id}}">{{produit.reference}}</option>
											</select></td>
											<td><span e-form="rowform">{{produit.designation
													|| 'EMPTY'}}</span></td>
											<td><span e-form="rowform"> {{produit.sousFamille
													|| 'EMPTY' }} </span></td>
											</td>
											<td><input type="number" class="form-control"
												ng-model="produit.quantite" /></td>
												
												<td><input type="number" class="form-control"
												ng-model="produit.quantiteEnvoyer" disabled />

											<td
												ng-style="isSerialisable(produit.produitId) &&  produit.quantite !== produit.produitsSerialisable.length && {'background-color':'coral'}">
												<a class="fa fa-barcode"
												ng-if="isSerialisable(produit.produitId)"
												data-target="#SeriesModal{{$index}}" data-toggle="modal">
											</a>
												<div class="modal fade" tabindex="-1"
													id="SeriesModal{{$index}}" data-keyboard="false"
													data-backdrop="static">
													<div class="modal-dialog modal-sm">
														<div class="modal-content"
															style="width: 700px !important; left: 50%; top: 0; display: block; position: absolute; margin: 100px auto !important; transform: translate(-50%, -0%); background-color: #fff; z-index: 1002;">
															<div class="modal-header">
																<button type="button" class="close" data-dismiss="modal">
																	&times;</button>
																<h4 class="modal-title">
																	{{getReferenceArticleAndDesignation(produit.produitId)}}</h4>
															</div>
															<div class="modal-body">
																<form>


																	<div class="row">
																		<div class="col-sm-6">


																			<div class="form-group">
																				<div class="input-group">
																					<div class="input-group-prepend">
																						<span class="input-group-text">N&ordm;
																							Serie</span>
																					</div>
																					<input type="text" class="form-control"
																						ng-init="numSerie =''" ng-model="numSerie"
																						ng-keypress="checkIfEnterKeyWasPressed($event,numSerie,$index)">
																				</div>
																			</div>



																		</div>
																		<div class="col-sm-1">
																			<button type="button" class="btn btn-primary"
																				ng-disabled="numSerie == null || numSerie == ''"
																				ng-click="ajouterNumSerieWS(numSerie,$index,produit.produitId)">Ajouter</button>

																		</div>


																	</div>



																	<table
																		class="table table-bordered table-condensed table-head-color">

																		<thead>
																			<tr>
																				<th style="width: 20%">N&ordm; Serie</th>

																				<th style="width: 20%">Fournisseur</th>
																				<th style="width: 18%">N&ordm; BR</th>
																				<th style="width: 20%">Client</th>
																				<th style="width: 18%">N&ordm; BL</th>



																				<th style="width: 4%"></th>
																			</tr>
																		</thead>

																		<tbody>
																			<tr
																				ng-repeat="produitSerialisable in produit.produitsSerialisable">
																				<td>{{produitSerialisable.numSerie}}</td>
																				<td>{{produitSerialisable.fournisseurAbreviation}}</td>

																				<td>{{produitSerialisable.numBonReception}}</td>


																				<td>{{produitSerialisable.partieIntersseDesignation}}</td>

																				<td>{{produitSerialisable.numBonLivraison}}</td>

																				<td class="pull-right"><button
																						class="btn btn-sm glyphicon glyphicon-trash"
																						ng-mousedown="removeNumSerie($parent.$index,$index)"></button></td>

																			</tr>

																		</tbody>
																	</table>





																</form>
															</div>
															<div class="modal-footer">

																<button type="button" class="btn btn-primary"
																	data-dismiss="modal">Retour</button>
															</div>
														</div>
													</div>
												</div>
											</td>

											<td style="white-space: nowrap">

												<form editable-form name="rowform"
													onbeforesave="saveProduit($data, produit.id)"
													ng-show="rowform.$visible" class="form-buttons form-inline"
													shown="produitInserree == produit">
													<button type="submit" ng-disabled="rowform.$waiting"
														class="btn btn-sm glyphicon glyphicon-save"
														aria-hidden="true"></button>
													<button type="button" ng-disabled="rowform.$waiting"
														ng-click="cancelAddReceptionAchat(rowform, $index,  produit.id, produit.produitId, listProduitReception )"
														class="btn btn-sm glyphicon glyphicon-remove"></button>
												</form>
												<div class="buttons" ng-show="!rowform.$visible">

													<button data-nodrag
														class="btn btn-sm glyphicon glyphicon-trash"
														ng-click="removeProduit($index)"></button>
												</div>
											</td>
										</tr>
								</table>

							</div>


						</div>
					</div>
				</div>

			</div>
		</div>
	</div>




	<script type="text/ng-template" id="couleurPopUp.html">
		<div class="modal-header"  >
			<div class='title-ajout'>D&eacute;tails Produit Taille / Couleur</div>
		</div>
		<div class="modal-body">
	
		   
			<table class="table table-bordered table-condensed table-head-color">
				<thead>
					<tr>
						<th>COULEUR \ TAILLE</th>
						<th ng-repeat="taille in listeTaille">{{taille.designation}}</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="couleur in listeColor" class="taille">
						<td> {{couleur.designation}} </td>
						<td ng-repeat="taille in listeTaille track by $index">
							<input
							class="form-control"
							ng-model="maGprotapedValue[$index][$parent.$index]"
							ng-keyup="addNewElement($event,maGprotapedValue[$index][$parent.$index],[$index],[$parent.$index],taille,couleur)"
							ng-init="maGprotapedValue[$index][$parent.$index] = demoQuantite(couleur.id,taille.id)">
							
				
							  	
							</td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="modal-footer">
			<button class="btn-action btn" ng-click="ok()">Valider</button>
			<button class="btn-action btn" ng-click="cancel()">Annuler</button>
		</div>
	</script>

	<div id="fade" class="black_overlay"></div>
	<div id="light" class="white_content">
		<pop-up type="delete-bonInventaire"></pop-up>
	</div>
	<div id="fade" class="black_overlay"></div>
</div>