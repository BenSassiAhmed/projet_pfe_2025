<script type="text/javascript">
  var CommandBarElements = document.querySelectorAll(".ms-CommandBar");
  for (var i = 0; i < CommandBarElements.length; i++) {
    new fabric['CommandBar'](CommandBarElements[i]);
  }

  var SearchBoxElements = document.querySelectorAll(".ms-SearchBox");
  for (var i = 0; i < SearchBoxElements.length; i++) {
    new fabric['SearchBox'](SearchBoxElements[i]);
  }

</script>

<div ng-controller="VenteBCCtrl" style="background-color: #fff;">

	<div class="row" ng-show="traitementEnCoursAllProduit=='true'">
		<div class="col-sm-5"></div>
		<div class="col-sm-2">
			<br>
			<div ng-click="traitementEnCoursAllProduit ='false'">


				<div class="lds-ellipsis">
					<div></div>
					<div></div>
					<div></div>
					<div></div>
				</div>




			</div>

		</div>
		<div class="col-sm-5"></div>

	</div>

	<div class="row">
		<div class="col-sm-12" ng-show="displayMode != 'edit'">
			<div class="panel-body">


				<br />
				<span class="ms-ListItem-secondaryText float-right font-italic"> <b> Bon de Commande</b> </span>


				<br />

				<span class="ms-ListItem-primaryText">Crit&egrave;res de recherche</span>
				<br />



				<div class="ms-CommandBar ms-CommandBar--navBar">
					<div class="ms-CommandBar-sideCommands">


						<div class="ms-CommandButton ms-CommandButton--noLabel">
							<button class="ms-CommandButton-button">
								<span class="ms-CommandButton-icon ms-fontColor-themePrimary"><i
										class="ms-Icon ms-Icon--Info"></i></span>
								<span class="ms-CommandButton-label"></span>
							</button>
						</div>
					</div>
					<div class="ms-CommandBar-mainArea">


						<div class="ms-CommandButton">
							<button class="ms-CommandButton-button" ng-click="AffectationVenteBC()" ng-disabled="">
								<span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--CirclePlus"></i></span>
								<span class="ms-CommandButton-label">Ajouter</span>
							</button>
						</div>

						<div class="ms-CommandButton">
							<button class="ms-CommandButton-button" >
								<span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Generate"></i></span>
								<span class="ms-CommandButton-label">G&eacute;n&eacute;rer</span>
								<ul class="ms-ContextualMenu is-opened ms-ContextualMenu--hasIcons">
									<li class="ms-ContextualMenu-item">
									  <a class="ms-ContextualMenu-link" tabindex="1"
										ng-click="dowloadListCmdvente(commandeVenteCourante)">EXCEL</a>
					  
									</li>
								<!-- 	<li class="ms-ContextualMenu-item">
									  <a class="ms-ContextualMenu-link" tabindex="1"
										ng-click="dowloadListCmdventeDevise(commandeVenteCourante)">EXCEL avec devise</a>
					  
									</li> -->
								</ul>




							</button>
						</div>
						<div class="ms-CommandButton">
							<button class="ms-CommandButton-button" ng-click="rechercherCommandeVente(commandeVenteCourante)">
								<span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--FolderSearch"></i></span>
								<span class="ms-CommandButton-label">Rechercher</span>
							</button>
						</div>

						<div class="ms-CommandButton">
							<button class="ms-CommandButton-button" ng-click="annulerAjout()">
								<span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Cancel"></i></span>
								<span class="ms-CommandButton-label">Annuler</span>
							</button>
						</div>
						<div class="ms-CommandButton ms-CommandBar-overflowButton ms-CommandButton--noLabel">
							<button class="ms-CommandButton-button">
								<span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--More"></i></span>
								<span class="ms-CommandButton-label"></span>
							</button>
							<ul class="ms-ContextualMenu is-opened">
								<li class="ms-ContextualMenu-item">
									<a class="ms-ContextualMenu-link" tabindex="1">Folder</a>
									<i class="ms-Icon ms-Icon--Folder"></i>
								</li>
								<li class="ms-ContextualMenu-item ms-ContextualMenu-item--divider"></li>
								<li class="ms-ContextualMenu-item">
									<a class="ms-ContextualMenu-link" tabindex="1">Plain Text Document</a>
									<i class="ms-Icon ms-Icon--Document"></i>
								</li>
								<li class="ms-ContextualMenu-item">
									<a class="ms-ContextualMenu-link" tabindex="1">A Coffee</a>
									<i class="ms-Icon ms-Icon--Coffee"></i>
								</li>
								<li class="ms-ContextualMenu-item">
									<a class="ms-ContextualMenu-link" tabindex="1">Picture</a>
									<i class="ms-Icon ms-Icon--Picture"></i>
								</li>
								<li class="ms-ContextualMenu-item">
									<a class="ms-ContextualMenu-link" tabindex="1">Money</a>
									<i class="ms-Icon ms-Icon--Money"></i>
								</li>
							</ul>
						</div>
					</div>
				</div>


				<div class="panel panel-primary">
					<div class="panel-body">
						<form class="form-horizontal" id="rechercheSSForm" name="rechercheSSForm">

							<div class="row">
								<div class="col-sm-4">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">R&eacute;f&eacute;rence</label>
											</div>
											<input type="text" class="form-control" ng-init="commandeVenteCourante.reference =''"
												ng-model="commandeVenteCourante.reference">
										</div>
									</div>

								</div>
								<div class="col-sm-4">


									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Client</label>
											</div>
											<select ui-select2 ng-model="commandeVenteCourante.partieInteresseId"
												ng-init="commandeVenteCourante.partieInteresseId =''" data-placeholder="..."
												class="form-control " style="border: 1px solid #e5eaee !important;">
												<OPTION value="">Tous les Clients</OPTION>
												<option ng-repeat="pi in listeClientCache | filter:{famillePartieInteressee:1}"
													value="{{pi.id}}">
													{{pi.reference}}-{{pi.abreviation}}</option>
											</select>
										</div>
									</div>

								</div>


								<div class="col-sm-4">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Livr&eacute;</label>
											</div>
											<select ui-select2 ng-model="commandeVenteCourante.livre"
												ng-init="commandeVenteCourante.livre =''" data-placeholder="" class="form-control "
												style="border: 1px solid #e5eaee !important;">
												<option value="">Tous</option>
												<option value="oui">OUI</option>
												<option value="non">NON</option>

											</select>
										</div>
									</div>

								</div>


							</div>




							<div class="row">
								<div class="col-sm-6" ng-controller="DatepickerDemoController">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text ms-Label">
													Date
													Commande de</span>
											</div>
											<input type="text" class="form-control datepicker" datepicker-popup="{{format}}"
												ng-init="commandeVenteCourante.dateIntroductionDu =''"
												ng-model="commandeVenteCourante.dateIntroductionDu" is-open="opened"
												datepicker-options="dateOptions" date-="enabled(date, mode)" ng-required="true"
												close-text="Close" />

											<div class="input-group-append">
												<button type="button" class="btn1 btn-default" ng-click="open($event)" style="
														color: rgb(54, 153, 255);
														background-color: rgb(225, 240, 255);
													">
													<i class="glyphicon glyphicon-calendar" style="color: #3699ff;"></i>
												</button>
											</div>
										</div>
									</div>


								</div>
								<div class="col-sm-6" ng-controller="DatepickerDemoController">


									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text ms-Label">
													A</span>
											</div>
											<input type="text" class="form-control datepicker" datepicker-popup="{{format}}"
												ng-init="commandeVenteCourante.dateIntroductionA =''"
												ng-model="commandeVenteCourante.dateIntroductionA" is-open="opened"
												datepicker-options="dateOptions" date-="enabled(date, mode)" ng-required="true"
												close-text="Close" />

											<div class="input-group-append">
												<button type="button" class="btn1 btn-default" ng-click="open($event)" style="
														color: rgb(54, 153, 255);
														background-color: rgb(225, 240, 255);
													">
													<i class="glyphicon glyphicon-calendar" style="color: #3699ff;"></i>
												</button>
											</div>
										</div>
									</div>



								</div>

							</div>
							<div class="row">
								<div class="col-sm-6" ng-controller="DatepickerDemoController">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text ms-Label">
													Date
													Livraison de</span>
											</div>
											<input type="text" class="form-control datepicker" datepicker-popup="{{format}}"
												ng-init="commandeVenteCourante.dateLivraisonDu =''"
												ng-model="commandeVenteCourante.dateLivraisonDu" is-open="opened"
												datepicker-options="dateOptions" date-="enabled(date, mode)" ng-required="true"
												close-text="Close" />

											<div class="input-group-append">
												<button type="button" class="btn1 btn-default" ng-click="open($event)" style="
														color: rgb(54, 153, 255);
														background-color: rgb(225, 240, 255);
													">
													<i class="glyphicon glyphicon-calendar" style="color: #3699ff;"></i>
												</button>
											</div>
										</div>
									</div>

								</div>
								<div class="col-sm-6" ng-controller="DatepickerDemoController">




									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text ms-Label">
													A</span>
											</div>
											<input type="text" class="form-control datepicker" datepicker-popup="{{format}}"
												ng-init="commandeVenteCourante.dateLivraisonA =''"
												ng-model="commandeVenteCourante.dateLivraisonA" is-open="opened"
												datepicker-options="dateOptions" date-="enabled(date, mode)" ng-required="true"
												close-text="Close" />

											<div class="input-group-append">
												<button type="button" class="btn1 btn-default" ng-click="open($event)" style="
														color: rgb(54, 153, 255);
														background-color: rgb(225, 240, 255);
													">
													<i class="glyphicon glyphicon-calendar" style="color: #3699ff;"></i>
												</button>
											</div>
										</div>
									</div>

								</div>
							</div>




							<div class="row">
								<div class="col-sm-3">







									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Quantit&eacute; Du</label>
											</div>
											<input type="text" class="form-control" ng-init="commandeVenteCourante.quantiteDu =''"
												ng-model="commandeVenteCourante.quantiteDu" min="0" pattern="^\d*(\.\d{0,2})?$" placeholder="0"
												value="0" name="quantiteDu">
										</div>



										<div ng-show="
										rechercheSSForm.quantiteDu.$dirty && rechercheSSForm.quantiteDu.$invalid" class="error">
											<div ng-show="rechercheSSForm.quantiteDu.$error">
												La valeur doit être supérieure ou égale à 0 !
											</div>
										</div>
									</div>


								</div>
								<div class="col-sm-3">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Quantit&eacute; A</label>
											</div>
											<input type="number" class="form-control" ng-init="commandeVenteCourante.quantiteA =''"
												ng-model="commandeVenteCourante.quantiteA" min="0" pattern="^\d*(\.\d{0,2})?$" placeholder="0"
												value="0" name="quantiteA">
										</div>

										<div ng-show="
										rechercheSSForm.quantiteA.$dirty && rechercheSSForm.quantiteA.$invalid" class="error">
											<div ng-show="rechercheSSForm.quantiteA.$error">
												La valeur doit être supérieure ou égale à 0 !
											</div>
										</div>
									</div>

								</div>
								<div class="col-sm-3">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Prix Du</label>
											</div>
											<input type="number" class="form-control" ng-init="commandeVenteCourante.coutDu =''"
												ng-model="commandeVenteCourante.coutDu" min="0" pattern="^\d*(\.\d{0,2})?$" placeholder="0.00"
												value="0" name="coutDu">
										</div>
										<div ng-show="
										rechercheSSForm.coutDu.$dirty && rechercheSSForm.coutDu.$invalid" class="error">
											<div ng-show="rechercheSSForm.coutDu.$error">
												La valeur doit être supérieure ou égale à 0 !
											</div>
										</div>
									</div>


								</div>
								<div class="col-sm-3">



									<div class="form-group">
										<div class="input-group ">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label"> Prix A</label>
											</div>
											<input type="number" class="form-control" ng-init="commandeVenteCourante.coutA =''"
												ng-model="commandeVenteCourante.coutA" min="0" pattern="^\d*(\.\d{0,2})?$" placeholder="0.00"
												value="0" name="coutA">
										</div>

										<div ng-show="
										rechercheSSForm.coutA.$dirty && rechercheSSForm.coutA.$invalid" class="error">
											<div ng-show="rechercheSSForm.coutA.$error">
												La valeur doit être supérieure ou égale à 0 !
											</div>
										</div>
									</div>


								</div>
							</div>


                        <div class="row">
							<div class="col-sm-3">
								<div class="form-group">
									<div class="input-group">
										<div class="input-group-prepend">
											<span class="input-group-text">Devise </span>
										</div>
										<select ui-select2="true" class="form-control" ng-model="commandeVenteCourante.devise"
											ng-init="commandeVenteCourante.devise=''">
											<option value="">Tous</option>
											<option ng-repeat="dev in ListeDevise" value="{{dev.id}}">
											{{dev.designation}}</option>
										</select>
									</div>
								</div>
								</div>
							</div>
						</form>

					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row" ng-show="traitementEnCours=='true'" ng-click="traitementEnCours ='false'">
		<div class="col-sm-5"></div>
		<div class="col-sm-2">
			<br>
			<div>
				<div>

					<div class="lds-spinner">
						<div></div>
						<div></div>
						<div></div>
						<div></div>
						<div></div>
						<div></div>
						<div></div>
						<div></div>
						<div></div>
						<div></div>
						<div></div>
						<div></div>
					</div>
				</div>
				<div></div>
				<div>{{msg}}</div>


			</div>

		</div>
		<div class="col-sm-5"></div>

	</div>


	<div class="row" ng-hide="hiddenNotif">

		<div class="col-sm-8"></div>
		<div class="col-sm-4">
			<br> <span>
				<alert type="success" class="alert-success-sauvegarde light"
					style="text-align: center !important; background-color: #1BC5BD !important">
					<span ng-bind-html="'Commande enregistr&eacute;e avec succ&egrave;s.' | safe_html"></span>
					<a> <i class="fa fa-times close-notif" ng-click="closeNotif()" style="color: #fff !important;"></i>
					</a> </alert>
			</span>
		</div>
	</div>

	<div class="row" ng-show="traitementEnCoursCommande=='true'">
		<div class="col-sm-5"></div>
		<div class="col-sm-2">
			<br>
			<div ng-click="traitementEnCoursCommande ='false'">


				<div class="lds-ellipsis">
					<div></div>
					<div></div>
					<div></div>
					<div></div>
				</div>




			</div>

		</div>
		<div class="col-sm-5"></div>

	</div>

	<div class="row">
		<div class="col-sm-12" ng-show="displayMode == 'edit'">

			<div class="panel-body">

				<br />
				<span class="ms-ListItem-secondaryText float-right font-italic"> <b> Bon de Commande</b> </span>






				<span class="ms-ListItem-primaryText" ng-show="modePdf != 'actif'">Cr&eacute;ation Bon de Commande</span>
				<span class="ms-ListItem-primaryText" ng-show="modePdf == 'actif'">Modification Bon de Commande</span>
				<br />




				<div class="ms-CommandBar ms-CommandBar--navBar">
					<div class="ms-CommandBar-sideCommands">


						<div class="ms-CommandButton ms-CommandButton--noLabel">
							<button class="ms-CommandButton-button">
								<span class="ms-CommandButton-icon ms-fontColor-themePrimary"><i
										class="ms-Icon ms-Icon--Info"></i></span>
								<span class="ms-CommandButton-label"></span>
							</button>
						</div>
					</div>
					<div class="ms-CommandBar-mainArea">


						<div class="ms-CommandButton" permission="['Bon_de_Commande_Edit']">
							<button class="ms-CommandButton-button" ng-click="sauvegarderAjout(commandeVenteCourante)" ng-disabled="">
								<span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Save"></i></span>
								<span class="ms-CommandButton-label">Enregistrer</span>
							</button>
						</div>

				
						
						
						       <div class="ms-CommandButton ms-CommandButton--dropdown" ng-show="modePdf == 'actif'">
            <button class="ms-CommandButton-button">
              <span class="ms-CommandButton-icon ms-fontColor-themePrimary"><i
                  class="ms-Icon ms-Icon--Generate"></i></span>
              <span class="ms-CommandButton-label">G&eacute;n&eacute;rer</span>
              <span class="ms-CommandButton-dropdownIcon"><i class="ms-Icon ms-Icon--ChevronDown"></i></span>
            </button>
            <ul class="ms-ContextualMenu is-opened ms-ContextualMenu--hasIcons">
              <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1" ng-show="modePdf == 'actif'"
                 ng-click="download(commandeVenteCourante.id,checkboxModel.rapportPrix,commandeVenteCourante.type,'non',1)">Sans En-t&ecirc;te</a>

			  </li>
			  <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1" ng-show="modePdf == 'actif'"
                 ng-click="download(commandeVenteCourante.id,checkboxModel.rapportPrix,commandeVenteCourante.type,'non',2)">Sans En-t&ecirc;te $/€</a>

              </li>
              <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1" ng-show="modePdf == 'actif'"
                 ng-click="download(commandeVenteCourante.id,checkboxModel.rapportPrix,commandeVenteCourante.type,'oui',3)">Avec En-t&ecirc;te</a>

			  </li>
			  <li class="ms-ContextualMenu-item">
                <a class="ms-ContextualMenu-link" tabindex="1" ng-show="modePdf == 'actif'"
                 ng-click="download(commandeVenteCourante.id,checkboxModel.rapportPrix,commandeVenteCourante.type,'oui',4)">Avec En-t&ecirc;te $/€</a>

              </li>
            </ul>
          </div>
						
						
						


						<div class="ms-CommandButton">
							<button class="ms-CommandButton-button" ng-click="annulerAjout()">
								<span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--Back"></i></span>
								<span class="ms-CommandButton-label">Retour</span>
							</button>
						</div>
						<div class="ms-CommandButton ms-CommandBar-overflowButton ms-CommandButton--noLabel">
							<button class="ms-CommandButton-button">
								<span class="ms-CommandButton-icon"><i class="ms-Icon ms-Icon--More"></i></span>
								<span class="ms-CommandButton-label"></span>
							</button>
							<ul class="ms-ContextualMenu is-opened">
								<li class="ms-ContextualMenu-item">
									<a class="ms-ContextualMenu-link" tabindex="1">Folder</a>
									<i class="ms-Icon ms-Icon--Folder"></i>
								</li>
								<li class="ms-ContextualMenu-item ms-ContextualMenu-item--divider"></li>
								<li class="ms-ContextualMenu-item">
									<a class="ms-ContextualMenu-link" tabindex="1">Plain Text Document</a>
									<i class="ms-Icon ms-Icon--Document"></i>
								</li>
								<li class="ms-ContextualMenu-item">
									<a class="ms-ContextualMenu-link" tabindex="1">A Coffee</a>
									<i class="ms-Icon ms-Icon--Coffee"></i>
								</li>
								<li class="ms-ContextualMenu-item">
									<a class="ms-ContextualMenu-link" tabindex="1">Picture</a>
									<i class="ms-Icon ms-Icon--Picture"></i>
								</li>
								<li class="ms-ContextualMenu-item">
									<a class="ms-ContextualMenu-link" tabindex="1">Money</a>
									<i class="ms-Icon ms-Icon--Money"></i>
								</li>
							</ul>
						</div>
					</div>
				</div>

				<div class="panel panel-primary">
					<div class="panel-body">
						<form name="creationSSForm">

							<!-- <div class="row" ng-hide="hiddenNotif">
								<div class="col-sm-8">
								</div>
								<div class="col-sm-4">


									<span>
										<alert type="success" class="alert-success-sauvegarde light"
											style="text-align: center !important; background-color: #1BC5BD !important"> <span
												ng-bind-html="'Commande enregistrer avec succ&egrave;s.' | safe_html"></span>
											<a> <i class="fa fa-times close-notif" ng-click="closeNotif()"
													style="color: #fff !important;"></i>
											</a> </alert>
									</span>
								</div>
							</div> -->
							<div class="row">
								<div class="col-sm-6">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">R&eacute;f&eacute;rence</label>
											</div>
											<input type="text" class="form-control" ng-model="commandeVenteCourante.reference"
												ng-disabled="modePdf != 'actif' && clientActif.disableVente">
										</div>
									</div>
								</div>
								<div class="col-sm-6">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Client</label>
											</div>
											<select ui-select2 ng-model="commandeVenteCourante.partieIntersseId"
												ng-init="commandeVenteCourante.partieIntersseId =''" data-placeholder="..."
												class="form-control " style="border: 1px solid #e5eaee !important;">
												<option value="">Tous</option>
												<option ng-repeat="pi in listeClientCache | filter:{famillePartieInteressee:1}"
													value="{{pi.id}}">
													{{pi.reference}}-{{pi.abreviation}}</option>
											</select>
										</div>
									</div>
								</div>


							</div>
							<div class="row">
								<div class="col-sm-6" ng-controller="DatepickerDemoController">




									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text ms-Label">
													Date
													Commande</span>
											</div>
											<input type="text" class="form-control datepicker" datepicker-popup="{{format}}"
												ng-model="commandeVenteCourante.dateIntroduction" is-open="opened"
												datepicker-options="dateOptions" date-disabled="enabled(date, mode)" close-text="Close" />

											<div class="input-group-append">
												<button type="button" class="btn1 btn-default" ng-click="open($event)" style="
															color: rgb(54, 153, 255);
															background-color: rgb(225, 240, 255);
														">
													<i class="glyphicon glyphicon-calendar" style="color: #3699ff;"></i>
												</button>
											</div>
										</div>
									</div>


								</div>
								<div class="col-sm-6" ng-controller="DatepickerDemoController">




									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text ms-Label">
													Date
													Livraison</span>
											</div>
											<input type="text" class="form-control datepicker" datepicker-popup="{{format}}"
												ng-model="commandeVenteCourante.dateLivraison" is-open="opened" datepicker-options="dateOptions"
												date-="enabled(date, mode)" ng-required="true" close-text="Close" />

											<div class="input-group-append">
												<button type="button" class="btn1 btn-default" ng-click="open($event)" style="
															color: rgb(54, 153, 255);
															background-color: rgb(225, 240, 255);
														">
													<i class="glyphicon glyphicon-calendar" style="color: #3699ff;"></i>
												</button>
											</div>
										</div>
									</div>

								</div>
							</div>


							<div class="row">
								<div class="col-sm-3">
									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text">Devise </span>
											</div>
											<select ui-select2="true" class="form-control" ng-model="commandeVenteCourante.devise"
												ng-init="commandeVenteCourante.devise=''">
												<option ng-repeat="dev in ListeDevise" value="{{dev.id}}">
												{{dev.designation}}</option>
											</select>
										</div>
									</div>
									</div>
									<div class="col-sm-4">
										<div class="form-group">
											<div class="input-group">
												<div class="input-group-prepend">
													<label class="input-group-text ms-Label ">Taux Conversion  </label>
												</div>
												<input class="form-control" type="number" step="any"  ng-model="commandeVenteCourante.tauxConversion " 
											
													ng-init="commandeVenteCourante.tauxConversion =''" />
												
												
											</div>
										</div>
										</div>


							</div>


							<div class="row" ng-show="modePdf == 'actif'">

								<div class="col-sm-4">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Prix
													Total</label>
											</div>
											<input class="form-control" ng-model="commandeVenteCourante.prixTotal" readonly="readonly"
												value="{{commandeVenteCourante.prixTotal}}" />
										</div>
									</div>

								</div>
								<div class="col-sm-4">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Quantite</label>
											</div>
											<input class="form-control" ng-model="commandeVenteCourante.quantite" readonly="readonly"
												value="{{commandeVenteCourante.quantite}}" />
										</div>
									</div>
								</div>

							</div>




							<div class="row">

								<div class="col-sm-6">





									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Observations</label>
											</div>
											<textarea class="form-control" ng-model="commandeVenteCourante.observations" rows="1"></textarea>
										</div>
									</div>

								</div>
								
								<div class="col-sm-3">



									<div class="form-group">




										<div class="form-group  float-right">
											<div class="input-group">

												<div class="input-group-prepend ">
													<label class="input-group-text ms-Label is-required">Prix</label>
												</div>
												<div class="input-group-prepend">
													<div class="input-group-text">
														<label class="checkbox checkbox-square checkbox-primary">
															<input type="checkbox" ng-init="checkboxModel.rapportPrix='oui'"
																ng-model="checkboxModel.rapportPrix" ng-true-value="oui" ng-false-value="non">
															<span></span> </label>
													</div>
												</div>

											</div>
										</div>


									</div>

								</div>
							</div>
						






							<div class="row alert alert-primary" ng-show="modePdf == 'actif'">
								<div class="col-sm-4">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Montant
													Taxe</label>
											</div>
											<input class="form-control" readonly="readonly"
												value="{{commandeVenteCourante.montantTaxe | prixFiltre}}" />
										</div>
									</div>

								</div>




								<div class="col-sm-4">
									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Montant
													HT</label>
											</div>
											<input class="form-control" readonly="readonly"
												value="{{commandeVenteCourante.prixTotal | prixFiltre}}" />
										</div>
									</div>



								</div>
								<div class="col-sm-4">



									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Montant
													Remise</label>
											</div>
											<input class="form-control" readonly="readonly"
												value="{{commandeVenteCourante.montantRemise | prixFiltre}}" />
										</div>
									</div>


								</div>

								<div class="col-sm-4">





									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Montant
													TTC</label>
											</div>
											<input class="form-control" readonly="readonly"
												value="{{commandeVenteCourante.montantTTC | prixFiltre}}" />
										</div>
									</div>

								</div>
								
								<div class="col-sm-4">





									<div class="form-group">
										<div class="input-group">
											<div class="input-group-prepend">
												<label class="input-group-text ms-Label">Montant Converti</label>
											</div>
											<input class="form-control" readonly="readonly"
												value="{{commandeVenteCourante.montantConverti | prixFiltre}}" />
										</div>
									</div>

								</div>

							</div>



							<div class="row">

								<div class="col-sm-12">
									<span class="ms-ListItem-primaryText " ng-show="modePdf == 'actif'"> D&eacute;tails R&eacute;glement
										{{reglementCourante.reference}} <i class="fa fa-chevron-down clickable" style="margin-right: 5px;"
											ng-click="isCollapsedDetailReglement = !isCollapsedDetailReglement"></i></span>

									<div class="panel-body" ng-show="modePdf == 'actif'">
										<div class="form-group" ng-show="modePdf == 'actif' && isCollapsedDetailReglement">
											<div class="row">
												<div class="panel panel-primary">

													<table class="table table-bordered table-condensed table-head-color">
														<thead>
															<tr>
																<th class="TableHeaderalignment" style="width: 15%">Type</th>
																<th class="TableHeaderalignment" style="width: 15%">N&deg;
																	pi&eacute;ce</th>
																<th class="TableHeaderalignment" style="width: 10%">Banque</th>
																<th class="TableHeaderalignment" style="width: 10%">Montant</th>
																<th class="TableHeaderalignment" style="width: 10%">Emission</th>
																<th class="TableHeaderalignment" style="width: 10%">Ech&eacute;ance
																</th>
																<th class="TableHeaderalignment" style="width: 5%">Regl&eacute;</th>
																<th class="TableHeaderalignment" style="width: 15%">Observation
																</th>
																<th> <span class="ms-CommandButton-icon float-right"  ng-click="addElement()">
																	<a href="javascript:void(0)">
																		<i class="ms-Icon ms-Icon--CirclePlus" style="color: #fff !important ;"> </i>
																	</a>
																</span></th>
															</tr>
														</thead>
														<tbody ng-model="finalOperationsList">
															<tr ng-repeat="item in finalOperationsList track by $index ">
																<td><select ui-select2 ng-model="item.typeReglementId" data-placeholder="..."
																		style="width: 100%">
																		<option ng-repeat="pi in listTypes" value="{{pi.id}}">{{pi.designation}}</option>
																	</select></td>
																<td><input class="form-control" ng-model="item.numPiece" /></td>
																<td><input class="form-control" ng-model="item.banque" />
																</td>
																<td><input type="number" class="form-control" ng-model="item.montant" /></td>
																<td>




																	<div class="input-group">

																		<input type="date" class="form-control " datepicker-popup="{{format}}"
																			ng-model="item.dateEmission" />


																	</div>








																</td>
																<td>




																	<div class="input-group">

																		<input type="date" class="form-control " datepicker-popup="{{format}}"
																			ng-model="item.dateEcheance" />

																	</div>




																</td>
																<td><input type="checkbox" ng-model="item.regle" /></td>
																<td><input class="form-control" ng-model="item.observation" /></td>
																<td><button class="btn btn-sm glyphicon glyphicon-trash"
																		ng-click="removeDetailRegelement($index)"></button></td>
															</tr>
														</tbody>
													</table>
												</div>

											</div>
											<div class="row">
												<div class="col-sm-12">
													<div class="pull-right">

														<button class="btn btn-action" id="todoSubmit" ng-show="!reglementCourante.id"
															ng-style="myStyleBtn"
															ng-mousedown="sauvegarderAjoutReglement(reglementCourante)">Payer</button>

														<button class="btn btn-action" id="todoSubmit" ng-show="reglementCourante.id"
															ng-mousedown="sauvegarderAjoutReglement(reglementCourante)">Modifier</button>

														<!-- <button class="btn btn-action" id="todoSubmit" ng-click="addElement()">Ajouter</button> -->
													</div>
												</div>
											</div>

										</div>

									</div>
								</div>
							</div>



							<div class="row">
								<div class="col-sm-12">
									<span class="ms-ListItem-primaryText ">Articles</span>



									<div class="panel-body">
										<div class="form-group">
											<div class="row">



												<table ng-show="modePdf != 'actif'"
													class="table table-bordered table-condensed table-head-color">
													<thead>
														<tr>


															<th style="width: 25%">R&eacute;f.Article</th>
															<th style="width: 22%">Article</th>
															<th style="width: 13%">Sous Famille</th>
															<th style="width: 10%">Quantit&eacute;</th>
															<th style="width: 10%">Qte Livree</th>
															<th style="width: 15%">Prix Unitaire</th>
															<th style="width: 11%">Remise</th>
															<th> <span class="ms-CommandButton-icon float-right" ng-click="ajoutProduit()">
																	<a href="javascript:void(0)">
																		<i class="ms-Icon ms-Icon--CirclePlus" style="color: #fff !important ;"> </i>
																	</a>
																</span></th>
														</tr>
													</thead>
													<tbody>
														<tr ng-repeat="produit in listProduitCommandes">
															<td>

																<select ui-select2 ng-model="produit.produitId"
																	ng-change="clickProduit(produit.produitId, $index)" data-placeholder="..."
																	class="form-control " style="border: 1px solid #e5eaee !important;">
																	<option value="">Tous</option>
																	<option ng-repeat="produit in listeProduitCache" value="{{produit.id}}">
																		{{produit.reference}}
																	</option>
																</select>
															</td>
															<td>

																<select ui-select2 ng-model="produit.produitId"
																	ng-change="clickProduit(produit.produitId, $index)" data-placeholder="..."
																	class="form-control " style="border: 1px solid #e5eaee !important;">
																	<option ng-repeat="produit in listeProduitCache" value="{{produit.id}}">
																		{{produit.designation}}
																	</option>
																</select>
															</td>
															<td><span e-form="rowform">
																	{{produit.sousFamille || 'EMPTY' }} </span></td>



															<td>
																<input type="number" class="form-control" ng-model="produit.quantite" min="0"
																	pattern="^\d*(\.\d{0,2})?$" placeholder="0" value="0" name="quantite" />
															</td>

															<td><span e-form="rowform">
																	{{produit.quantiteLivree || 'EMPTY' }} </span></td>



															<td>
																<input type="number" class="form-control" ng-model="produit.prixUnitaire" min="0"
																	pattern="^\d*(\.\d{0,2})?$" placeholder="0.00" value="0" name="prixUnitaire" />
															</td>
															
															<td>
																<input type="number" class="form-control" ng-model="produit.remise" min="0"
																	pattern="^\d*(\.\d{0,2})?$" placeholder="0.00" value="0" name="remise" />
															</td>

															<td style="white-space: nowrap">

																<form editable-form name="rowform" onbeforesave="saveProduit($data, produit.id)"
																	ng-show="rowform.$visible" class="form-buttons form-inline float-right"
																	shown="produitInserree == produit">
																	<!-- <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-sm "
																		aria-hidden="true">

																		<i class="ms-Icon ms-Icon--Download" aria-hidden="true"></i>

																	</button>
																	<button type="button" ng-disabled="rowform.$waiting"
																		ng-click="cancelAddCommandeVente(rowform, $index,  produit.id, produit.produitId )"
																		class="btn btn-sm ">
																		<i class="ms-Icon ms-Icon--Cancel" aria-hidden="true"></i>

																	</button> -->
																</form>
																<div class="buttons" ng-show="!rowform.$visible">

																	<button data-nodrag class="btn btn-sm " ng-click="removeProduit($index)">


																		<i class="ms-Icon ms-Icon--Delete" aria-hidden="true"></i>

																	</button>
																</div>
															</td>
														</tr>
													</tbody>
												</table>


												<div ng-show="isLoading" class="col-sm-2"
													style="float: none; margin-left: auto; margin-right: auto; font-weight: bold;"
													class="col-sm-1">
													Chargement ...
												</div>


												<table ng-show="modePdf == 'actif'"
													class="table table-bordered table-condensed table-head-color">
													<thead>
														<tr>
															<th style="width: 25%">R&eacute;f.Article</th>
															<th style="width: 25%">Article</th>
															<th style="width: 15%">Sous Famille</th>
															<th style="width: 10%">Quantit&eacute;</th>
															<th style="width: 10%">Qte Livree</th>
															<th style="width: 15%">Prix Unitaire</th>
															<th style="width: 11%">Remise</th>
															<th> <span class="ms-CommandButton-icon float-right" ng-click="ajoutProduit()">
																	<a href="javascript:void(0)">
																		<i class="ms-Icon ms-Icon--CirclePlus" style="color: #fff !important ;"> </i>
																	</a>
																</span></th>
														</tr>
													</thead>
													<tbody>
														<tr ng-repeat="produit in listProduitCommandes">
															<td>

																<select ui-select2 ng-model="produit.produitId"
																	ng-change="clickProduit(produit.produitId, $index)" data-placeholder="..."
																	ng-disabled="produit.checked" class="form-control "
																	style="border: 1px solid #e5eaee !important;">
																	<option value="">Tous</option>
																	<option ng-repeat="produit in listeProduitCache" value="{{produit.id}}">
																		{{produit.reference}}
																	</option>
																</select>
															</td>
															<td>
																<span e-form="rowform">{{produit.designation || 'EMPTY'}}</span>

															</td>
															<td><span e-form="rowform">
																	{{produit.sousFamille || 'EMPTY' }} </span></td>
															</td>
															<td>
																<input type="number" class="form-control" min="1" ng-model="produit.quantite" min="0"
																	pattern="^\d*(\.\d{0,2})?$" placeholder="0" value="0" name="quantite" />
															</td>
															<td><span e-form="rowform">
																	{{produit.quantiteLivree || 'EMPTY' }} </span></td>
															</td>


															<td>
																<input type="number" class="form-control" ng-model="produit.prixUnitaire" min="0"
																	pattern="^\d*(\.\d{0,2})?$" placeholder="0.00" value="0" name="prixUnitaire" />
															</td>
															<td>
																<input type="number" class="form-control" ng-model="produit.remise" min="0"
																	placeholder="0" value="0" name="remise" />
															</td>

															<td style="white-space: nowrap">

																<form editable-form name="rowform" onbeforesave="saveProduit($data, produit.id)"
																	ng-show="rowform.$visible" class="form-buttons form-inline float-right"
																	shown="produitInserree == produit">
																	<button type="submit" ng-disabled="rowform.$waiting" class="btn btn-sm"
																		aria-hidden="true">

																		<i class="ms-Icon ms-Icon--Download" aria-hidden="true"></i>

																	</button>
																	<button type="button" ng-disabled="rowform.$waiting"
																		ng-click="cancelAddCommandeVente(rowform, $index,  produit.id, produit.produitId, listProduitCommande )"
																		class="btn btn-sm">

																		<i class="ms-Icon ms-Icon--Cancel" aria-hidden="true"></i>

																	</button>
																</form>
																<div class="buttons" ng-show="!rowform.$visible">

																	<button data-nodrag class="btn btn-sm " ng-click="removeProduit($index)">

																		<i class="ms-Icon ms-Icon--Delete" aria-hidden="true"></i>

																	</button>
																</div>
															</td>
														</tr>
												</table>



											</div>
										</div>
									</div>
								</div>
							</div>





						</form>
					</div>
				</div>



			</div>
		</div>
	</div>


	<script type="text/ng-template" id="couleurPopUp.html">
		<div class="modal-header"  >
			<div class='title-ajout'>D&eacute;tails Produit Taille / Couleur</div>
		</div>
		<div class="modal-body">

		   
			<table class="table table-bordered table-condensed table-head-color">
				<thead>
					<tr>
						<th>COULEUR \ TAILLE</th>
						<th ng-repeat="taille in listeTaille">{{taille.designation}}</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="couleur in listeColor" class="taille">
						<td> {{couleur.designation}} </td>
						<td ng-repeat="taille in listeTaille track by $index">
							<input
							class="form-control"
							ng-model="maGprotapedValue[$index][$parent.$index]"
							ng-keyup="addNewElement($event,maGprotapedValue[$index][$parent.$index],[$index],[$parent.$index],taille,couleur)"
							ng-init="maGprotapedValue[$index][$parent.$index] = demoQuantite(couleur.id,taille.id)">
							
						
							  	
							</td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="modal-footer">
			<button class="btn-action btn" ng-click="ok()">Valider</button>
			<button class="btn-action btn" ng-click="cancel()">Annuler</button>
		</div>
	</script>

	<!-- <div id="fade" class="black_overlay"></div> -->

	<div class="row">
		<div class="col-sm-12" ng-show="displayMode != 'edit'">
			<div class="panel-body">
				<div class="col-md-12">

					<span class="ms-ListItem-primaryText line">Liste des Bons de Commande</span>
					<br/>

					<div style="height: 500px;" ng-grid="gridOptions"></div>
				</div>

			</div>
		</div>
	</div>


	<div id="light" class="white_content">
		<pop-up type="delete-commandeVente"></pop-up>
	</div>
	<div id="fade" class="black_overlay"></div>
</div>